+function(a){var b={autoInit:false,showPageLoadingIndicator:true,router:true,swipePanel:"left",swipePanelOnlyClose:true};a.smConfig=a.extend(b,a.config)}(Zepto);+function(a){a.compareVersion=function(f,d){var e=f.split(".");var g=d.split(".");if(f===d){return 0}for(var h=0;h<e.length;h++){var c=parseInt(e[h]);if(!g[h]){return 1}var j=parseInt(g[h]);if(c<j){return -1}if(c>j){return 1}}return -1};a.getCurrentPage=function(){return a(".page-current")[0]||a(".page")[0]||document.body}}(Zepto);(function(b){["width","height"].forEach(function(d){var c=d.replace(/./,function(e){return e[0].toUpperCase()});b.fn["outer"+c]=function(h){var g=this;if(g){var e=g[d]();var f={width:["left","right"],height:["top","bottom"]};f[d].forEach(function(i){if(h){e+=parseInt(g.css("margin-"+i),10)}});return e}else{return null}}});b.support=(function(){var c={touch:!!(("ontouchstart" in window)||window.DocumentTouch&&document instanceof window.DocumentTouch)};return c})();b.touchEvents={start:b.support.touch?"touchstart":"mousedown",move:b.support.touch?"touchmove":"mousemove",end:b.support.touch?"touchend":"mouseup"};b.getTranslate=function(g,f){var c,e,h,d;if(typeof f==="undefined"){f="x"}h=window.getComputedStyle(g,null);if(window.WebKitCSSMatrix){d=new WebKitCSSMatrix(h.webkitTransform==="none"?"":h.webkitTransform)}else{d=h.MozTransform||h.transform||h.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");c=d.toString().split(",")}if(f==="x"){if(window.WebKitCSSMatrix){e=d.m41}else{if(c.length===16){e=parseFloat(c[12])}else{e=parseFloat(c[4])}}}if(f==="y"){if(window.WebKitCSSMatrix){e=d.m42}else{if(c.length===16){e=parseFloat(c[13])}else{e=parseFloat(c[5])}}}return e||0};b.requestAnimationFrame=function(c){if(window.requestAnimationFrame){return window.requestAnimationFrame(c)}else{if(window.webkitRequestAnimationFrame){return window.webkitRequestAnimationFrame(c)}else{if(window.mozRequestAnimationFrame){return window.mozRequestAnimationFrame(c)}else{return window.setTimeout(c,1000/60)}}}};b.cancelAnimationFrame=function(c){if(window.cancelAnimationFrame){return window.cancelAnimationFrame(c)}else{if(window.webkitCancelAnimationFrame){return window.webkitCancelAnimationFrame(c)}else{if(window.mozCancelAnimationFrame){return window.mozCancelAnimationFrame(c)}else{return window.clearTimeout(c)}}}};b.fn.dataset=function(){var f={},e=this[0].dataset;for(var c in e){var d=(f[c]=e[c]);if(d==="false"){f[c]=false}else{if(d==="true"){f[c]=true}else{if(parseFloat(d)===d*1){f[c]=d*1}}}}return b.extend({},f,this[0].__eleData)};b.fn.data=function(e,j){var g=b(this).dataset();if(!e){return g}if(typeof j==="undefined"){var c=g[e],h=this[0].__eleData;if(h&&(e in h)){return h[e]}else{return c}}else{for(var d=0;d<this.length;d++){var f=this[d];if(e in g){delete f.dataset[e]}if(!f.__eleData){f.__eleData={}}f.__eleData[e]=j}return this}};function a(c,h){var e=c,d,f=this;function g(i){if(i.target!==this){return}h.call(this,i);for(d=0;d<e.length;d++){f.off(e[d],g)}}if(h){for(d=0;d<e.length;d++){f.on(e[d],g)}}}b.fn.animationEnd=function(c){a.call(this,["webkitAnimationEnd","animationend"],c);return this};b.fn.transitionEnd=function(c){a.call(this,["webkitTransitionEnd","transitionend"],c);return this};b.fn.transition=function(e){if(typeof e!=="string"){e=e+"ms"}for(var d=0;d<this.length;d++){var c=this[d].style;c.webkitTransitionDuration=c.MozTransitionDuration=c.transitionDuration=e}return this};b.fn.transform=function(c){for(var e=0;e<this.length;e++){var d=this[e].style;d.webkitTransform=d.MozTransform=d.transform=c}return this};b.fn.prevAll=function(c){var e=[];var d=this[0];if(!d){return b([])}while(d.previousElementSibling){var f=d.previousElementSibling;if(c){if(b(f).is(c)){e.push(f)}}else{e.push(f)}d=f}return b(e)};b.fn.nextAll=function(d){var c=[];var f=this[0];if(!f){return b([])}while(f.nextElementSibling){var e=f.nextElementSibling;if(d){if(b(e).is(d)){c.push(e)}}else{c.push(e)}f=e}return b(c)};b.fn.show=function(){var d={};function c(g){var e,f;if(!d[g]){e=document.createElement(g);document.body.appendChild(e);f=getComputedStyle(e,"").getPropertyValue("display");e.parentNode.removeChild(e);f==="none"&&(f="block");d[g]=f}return d[g]}return this.each(function(){this.style.display==="none"&&(this.style.display="");if(getComputedStyle(this,"").getPropertyValue("display")==="none"){}this.style.display=c(this.nodeName)})};b.toggleTabTop=function(){if(b.custom.toggleTabTop){b.custom.pageObj.find(".content").scrollTop(b.custom.toggleTabTop)}}})(Zepto);(function(h){var d={};var c=navigator.userAgent;var f=c.match(/(Android);?[\s\/]+([\d.]+)?/);var n=c.match(/(iPad).*OS\s([\d_]+)/);var o=c.match(/(iPod)(.*OS\s([\d_]+))?/);var m=!n&&c.match(/(iPhone\sOS)\s([\d_]+)/);d.ios=d.android=d.iphone=d.ipad=d.androidChrome=false;if(f){d.os="android";d.osVersion=f[2];d.android=true;if(c.toLowerCase().indexOf("chrome")>=0){d.androidChrome=true;var j=c.match(/(Chrome);?[\s\/]+([\d.]+)?/);d.osVersion2=j[2];if(parseFloat(d.osVersion2)>=26){h.custom.supportVWVH=true}}else{d.androidChrome=false;if(parseFloat(d.osVersion)>=4.4){h.custom.supportVWVH=true}}}if(n||m||o){d.os="ios";d.ios=true}if(m&&!o){d.osVersion=m[2].replace(/_/g,".");d.iphone=true}if(n){d.osVersion=n[2].replace(/_/g,".");d.ipad=true}if(o){d.osVersion=o[3]?o[3].replace(/_/g,"."):null;d.iphone=true}if(d.ios&&d.osVersion&&c.indexOf("Version/")>=0){if(d.osVersion.split(".")[0]==="10"){d.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]}}if(d.ios&&parseFloat(d.osVersion)>=6){h.custom.supportVWVH=true}d.webView=(m||n||o)&&c.match(/.*AppleWebKit(?!.*Safari)/i);if(d.os&&d.os==="ios"){var k=d.osVersion.split(".");d.minimalUi=!d.webView&&(o||m)&&(k[0]*1===7?k[1]*1>=1:k[0]*1>7)&&h('meta[name="viewport"]').length>0&&h('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var e=getScreenWidth();var b=getScreenHeight();d.statusBar=false;if(d.webView&&(e*b===screen.width*screen.height)){d.statusBar=true}else{d.statusBar=false}var a=[];d.pixelRatio=window.devicePixelRatio||1;a.push("pixel-ratio-"+Math.floor(d.pixelRatio));if(d.pixelRatio>=2){a.push("retina")}if(d.os){a.push(d.os,d.os+"-"+d.osVersion.split(".")[0],d.os+"-"+d.osVersion.replace(/\./g,"-"));if(d.os==="ios"){var l=parseInt(d.osVersion.split(".")[0],10);for(var g=l-1;g>=6;g--){a.push("ios-gt-"+g)}}}if(d.statusBar){a.push("with-statusbar-overlay")}else{h("html").removeClass("with-statusbar-overlay")}if(a.length>0){h("html").addClass(a.join(" "))}d.isWeixin=/MicroMessenger/i.test(c);h.device=d})(Zepto);(function(){function e(p,m){var q;m=m||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=m.touchBoundary||10;this.layer=p;this.tapDelay=m.tapDelay||200;this.tapTimeout=m.tapTimeout||700;if(e.notNeeded(p)){return}function r(l,i){return function(){return l.apply(i,arguments)}}var k=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var o=this;for(var n=0,j=k.length;n<j;n++){o[k[n]]=r(o[k[n]],o)}if(c){p.addEventListener("mouseover",this.onMouse,true);p.addEventListener("mousedown",this.onMouse,true);p.addEventListener("mouseup",this.onMouse,true)}p.addEventListener("click",this.onClick,true);p.addEventListener("touchstart",this.onTouchStart,false);p.addEventListener("touchmove",this.onTouchMove,false);p.addEventListener("touchend",this.onTouchEnd,false);p.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){p.removeEventListener=function(l,t,i){var s=Node.prototype.removeEventListener;if(l==="click"){s.call(p,l,t.hijacked||t,i)}else{s.call(p,l,t,i)}};p.addEventListener=function(s,t,l){var i=Node.prototype.addEventListener;if(s==="click"){i.call(p,s,t.hijacked||(t.hijacked=function(u){if(!u.propagationStopped){t(u)}}),l)}else{i.call(p,s,t,l)}}}if(typeof p.onclick==="function"){q=p.onclick;p.addEventListener("click",function(i){q(i)},false);p.onclick=null}}var d=navigator.userAgent.indexOf("Windows Phone")>=0;var c=navigator.userAgent.indexOf("Android")>0&&!d;var h=/iP(ad|hone|od)/.test(navigator.userAgent)&&!d;var f=h&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var g=h&&(/OS [6-7]_\d/).test(navigator.userAgent);var b=navigator.userAgent.indexOf("BB10")>0;var a=false;e.prototype.needsClick=function(j){var i=j;while(i&&(i.tagName.toUpperCase()!=="BODY")){if(i.tagName.toUpperCase()==="LABEL"){a=true;if((/\bneedsclick\b/).test(i.className)){return true}}i=i.parentNode}switch(j.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(j.disabled){return true}break;case"input":if((h&&j.type==="file")||j.disabled){return true}break;case"label":case"iframe":case"video":return true}return(/\bneedsclick\b/).test(j.className)};e.prototype.needsFocus=function(i){switch(i.nodeName.toLowerCase()){case"textarea":return true;case"select":return !c;case"input":switch(i.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !i.disabled&&!i.readOnly;default:return(/\bneedsfocus\b/).test(i.className)}};e.prototype.sendClick=function(j,k){var i,l;if(document.activeElement&&document.activeElement!==j){document.activeElement.blur()}l=k.changedTouches[0];i=document.createEvent("MouseEvents");i.initMouseEvent(this.determineEventType(j),true,true,window,1,l.screenX,l.screenY,l.clientX,l.clientY,false,false,false,false,0,null);i.forwardedTouchEvent=true;j.dispatchEvent(i)};e.prototype.determineEventType=function(i){if(c&&i.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};e.prototype.focus=function(j){var k;var i=["date","time","month","number","email"];if(h&&j.setSelectionRange&&i.indexOf(j.type)===-1){k=j.value.length;j.setSelectionRange(k,k)}else{j.focus()}};e.prototype.updateScrollParent=function(j){var k,i;k=j.fastClickScrollParent;if(!k||!k.contains(j)){i=j;do{if(i.scrollHeight>i.offsetHeight){k=i;j.fastClickScrollParent=i;break}i=i.parentElement}while(i)}if(k){k.fastClickLastScrollTop=k.scrollTop}};e.prototype.getTargetElementFromEventTarget=function(i){if(i.nodeType===Node.TEXT_NODE){return i.parentNode}return i};e.prototype.onTouchStart=function(k){var i,l,j;if(k.targetTouches.length>1){return true}i=this.getTargetElementFromEventTarget(k.target);l=k.targetTouches[0];if(h){j=window.getSelection();if(j.rangeCount&&!j.isCollapsed){return true}if(!f){if(l.identifier&&l.identifier===this.lastTouchIdentifier){k.preventDefault();return false}this.lastTouchIdentifier=l.identifier;this.updateScrollParent(i)}}this.trackingClick=true;this.trackingClickStart=k.timeStamp;this.targetElement=i;this.touchStartX=l.pageX;this.touchStartY=l.pageY;if((k.timeStamp-this.lastClickTime)<this.tapDelay){k.preventDefault()}return true};e.prototype.touchHasMoved=function(i){var k=i.changedTouches[0],j=this.touchBoundary;if(Math.abs(k.pageX-this.touchStartX)>j||Math.abs(k.pageY-this.touchStartY)>j){return true}return false};e.prototype.onTouchMove=function(i){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(i.target)||this.touchHasMoved(i)){this.trackingClick=false;this.targetElement=null}return true};e.prototype.findControl=function(i){if(i.control!==undefined){return i.control}if(i.htmlFor){return document.getElementById(i.htmlFor)}return i.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};e.prototype.onTouchEnd=function(l){var n,m,k,p,o,j=this.targetElement;if(!this.trackingClick){return true}if((l.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true}if((l.timeStamp-this.trackingClickStart)>this.tapTimeout){return true}var i=["date","time","month"];if(i.indexOf(l.target.type)!==-1){return false}this.cancelNextClick=false;this.lastClickTime=l.timeStamp;m=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(g){o=l.changedTouches[0];j=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||j;j.fastClickScrollParent=this.targetElement.fastClickScrollParent}k=j.tagName.toLowerCase();if(k==="label"){n=this.findControl(j);if(n){this.focus(j);if(c){return false}j=n}}else{if(this.needsFocus(j)){if((l.timeStamp-m)>100||(h&&window.top!==window&&k==="input")){this.targetElement=null;return false}this.focus(j);this.sendClick(j,l);if(!h||k!=="select"){this.targetElement=null;l.preventDefault()}return false}}if(h&&!f){p=j.fastClickScrollParent;if(p&&p.fastClickLastScrollTop!==p.scrollTop){return true}}if(!this.needsClick(j)){l.preventDefault();this.sendClick(j,l)}return false};e.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};e.prototype.onMouse=function(i){if(!this.targetElement){return true}if(i.forwardedTouchEvent){return true}if(!i.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(i.stopImmediatePropagation){i.stopImmediatePropagation()}else{i.propagationStopped=true}i.stopPropagation();if(!a){i.preventDefault()}return false}return true};e.prototype.onClick=function(i){var j;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(i.target.type==="submit"&&i.detail===0){return true}j=this.onMouse(i);if(!j){this.targetElement=null}return j};e.prototype.destroy=function(){var i=this.layer;if(c){i.removeEventListener("mouseover",this.onMouse,true);i.removeEventListener("mousedown",this.onMouse,true);i.removeEventListener("mouseup",this.onMouse,true)}i.removeEventListener("click",this.onClick,true);i.removeEventListener("touchstart",this.onTouchStart,false);i.removeEventListener("touchmove",this.onTouchMove,false);i.removeEventListener("touchend",this.onTouchEnd,false);i.removeEventListener("touchcancel",this.onTouchCancel,false)};e.notNeeded=function(j){var i;var m;var l;var k;if(typeof window.ontouchstart==="undefined"){return true}m=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(m){if(c){i=document.querySelector("meta[name=viewport]");if(i){if(i.content.indexOf("user-scalable=no")!==-1){return true}if(m>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(b){l=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(l[1]>=10&&l[2]>=3){i=document.querySelector("meta[name=viewport]");if(i){if(i.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(j.style.msTouchAction==="none"||j.style.touchAction==="manipulation"){return true}k=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(k>=27){i=document.querySelector("meta[name=viewport]");if(i&&(i.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(j.style.touchAction==="none"||j.style.touchAction==="manipulation"){return true}return false};e.attach=function(j,i){return new e(j,i)};window.FastClick=e}());+function(a){var d=document.createElement("div");a.modalStack=[];a.modalStackClearQueue=function(){if(a.modalStack.length){(a.modalStack.shift())()}};a.modal=function(k){k=k||{};var l="";var h="";if(k.buttons&&k.buttons.length>0){for(var m=0;m<k.buttons.length;m++){h+='<span class="modal-button'+(k.buttons[m].bold?" modal-button-bold":"")+'">'+k.buttons[m].text+"</span>"}}var j=k.extraClass||"";var g=k.title?'<div class="modal-title">'+k.title+"</div>":"";var e=k.text?'<div class="modal-text">'+k.text+"</div>":"";var n=k.afterText?k.afterText:"";var p=!k.buttons||k.buttons.length===0?"modal-no-buttons":"";var f=k.verticalButtons?"modal-buttons-vertical":"";l='<div class="modal '+j+" "+p+'"><div class="modal-inner">'+(g+e+n)+'</div><div class="modal-buttons '+f+'">'+h+"</div></div>";d.innerHTML=l;var o=a(d).children();a(b.modalContainer).append(o[0]);o.find(".modal-button").each(function(i,q){a(q).on("click",function(r){if(k.buttons[i].close!==false){a.closeModal(o)}if(k.buttons[i].onClick){k.buttons[i].onClick(o,r)}if(k.onClick){k.onClick(o,i)}})});a.openModal(o);return o[0]};a.openSuperModal=function(e){if(hasOpenSuperModal()){a.closeSuperModal()}var f=a(".super-modal-overlay");if(e){f.attr("data-item",e)}a.openModal(f,function(){if(e){f.find("."+e).show()}})};a.closeSuperModal=function(){var f=a(".super-modal-overlay");var e=f.attr("data-item");if(e){f.find("."+e).hide()}a.closeModal(f)};a.alert=function(j,h){h=h||{};var e=a(".super-modal-overlay");var k=e.find(".modal-alert");k.find(".alert-content").html(j||"");var i=h.button||{};var g=k.find(".alert-button");g.html(i.text||"确定");g.off("click").on("click",function(){a.closeSuperModal();if(i&&typeof i.callback==="function"){i.callback()}});var f=k.find(".alert-title");if(h.title){f.html(h.title||"提示").show()}else{f.hide()}a.openSuperModal("modal-alert")};a.confirm=function(h,f){f=f||{};var e=a(".super-modal-overlay").find(".modal-confirm");e.find(".confirm-content").html(h||"");var j=f.buttonOk||{};var g=f.buttonCancel||{};e.find(".confirm-btn-ok").html(j.text||"确定").off("click").on("click",function(){a.closeSuperModal();if(typeof j.callback==="function"){j.callback()}});e.find(".confirm-btn-cancel").html(g.text||"取消").off("click").on("click",function(){a.closeSuperModal();if(typeof g.callback==="function"){g.callback()}});var i=e.find(".confirm-title");if(f.title){i.html(f.title||"提示").show()}else{i.hide()}a.openSuperModal("modal-confirm")};a.showPreloader=function(e){a.hidePreloader();a.showPreloader.preloaderModal=a.modal({title:e||b.modalPreloaderTitle,text:'<div class="preloader"></div>'});return a.showPreloader.preloaderModal};a.hidePreloader=function(){a.showPreloader.preloaderModal&&a.closeModal(a.showPreloader.preloaderModal)};a.showIndicator=function(){if(a(".preloader-indicator-modal")[0]){return}a(b.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')};a.hideIndicator=function(){a(".preloader-indicator-overlay, .preloader-indicator-modal").remove()};a.actions=function(h){var o,e,q;h=h||[];if(h.length>0&&!a.isArray(h[0])){h=[h]}var k;var g="";for(var m=0;m<h.length;m++){for(var l=0;l<h[m].length;l++){if(l===0){g+='<div class="actions-modal-group">'}var n=h[m][l];var p=n.label?"actions-modal-label":"actions-modal-button";if(n.bold){p+=" actions-modal-button-bold"}if(n.color){p+=" color-"+n.color}if(n.bg){p+=" bg-"+n.bg}if(n.disabled){p+=" disabled"}g+='<span class="'+p+'">'+n.text+"</span>";if(l===h[m].length-1){g+="</div>"}}}k='<div class="actions-modal">'+g+"</div>";d.innerHTML=k;o=a(d).children();a(b.modalContainer).append(o[0]);e=".actions-modal-group";q=".actions-modal-button";var f=o.find(e);f.each(function(i,j){var r=i;a(j).children().each(function(t,u){var w=t;var v=h[r][w];var s;if(a(u).is(q)){s=a(u)}if(s){s.on("click",function(x){if(v.close!==false){a.closeModal(o)}if(v.onClick){v.onClick(o,x)}})}})});a.openModal(o);return o[0]};a.popup=function(f,g){if(typeof g==="undefined"){g=true}if(typeof f==="string"&&f.indexOf("<")>=0){var e=document.createElement("div");e.innerHTML=f.trim();if(e.childNodes.length>0){f=e.childNodes[0];if(g){f.classList.add("remove-on-close")}a(b.modalContainer).append(f)}else{return false}}f=a(f);if(f.length===0){return false}f.show();f.find(".content").scroller("refresh");if(f.find("."+b.viewClass).length>0){a.sizeNavbars(f.find("."+b.viewClass)[0])}a.openModal(f);return f[0]};a.pickerModal=function(f,e){if(typeof e==="undefined"){e=true}if(typeof f==="string"&&f.indexOf("<")>=0){f=a(f);if(f.length>0){if(e){f.addClass("remove-on-close")}a(b.modalContainer).append(f[0])}else{return false}}f=a(f);if(f.length===0){return false}f.show();a.openModal(f);return f[0]};a.loginScreen=function(e){if(!e){e=".login-screen"}e=a(e);if(e.length===0){return false}e.show();if(e.find("."+b.viewClass).length>0){a.sizeNavbars(e.find("."+b.viewClass)[0])}a.openModal(e);return e[0]};a.toast=function(f,e){openToast(f,e)};a.openModal=function(k,e){k=a(k);var j=k.hasClass("modal"),i=!k.hasClass("toast");if(a(".modal.modal-in:not(.modal-out)").length&&b.modalStack&&j&&i){a.modalStack.push(function(){a.openModal(k,e)});return}var m=k.hasClass("super-modal-overlay");var n=k.hasClass("popup");var g=k.hasClass("login-screen");var h=k.hasClass("picker-modal");var l=k.hasClass("toast");if(j){k.show();k.css({marginTop:-Math.round(k.outerHeight()/2)+"px"})}if(l){k.css({marginLeft:-Math.round(k.outerWidth()/2/1.185)+"px"})}var f;if(!g&&!h&&!l){f=n?a(".popup-overlay"):a(".modal-overlay")}if(m){f=a(".super-modal-overlay")}k.trigger("open");if(h){a(b.modalContainer).addClass("with-picker-modal")}if(!g&&!h&&!l){f.addClass("modal-overlay-visible")}k.removeClass("modal-out").addClass("modal-in").transitionEnd(function(o){if(k.hasClass("modal-out")){k.trigger("closed")}else{k.trigger("opened")}});if(typeof e==="function"){e.call(this)}return true};a.closeModal=function(j){j=a(j||".modal-in");if(typeof j!=="undefined"&&j.length===0){return}var i=j.hasClass("modal"),l=j.hasClass("super-modal-overlay"),m=j.hasClass("popup"),k=j.hasClass("toast"),g=j.hasClass("login-screen"),h=j.hasClass("picker-modal"),e=j.hasClass("remove-on-close"),f=m?a(".popup-overlay"):a(".modal-overlay");if(l){f=a(".super-modal-overlay")}if(m){if(j.length===a(".popup.modal-in").length){f.removeClass("modal-overlay-visible")}}else{if(!(h||k)){f.removeClass("modal-overlay-visible")}}j.trigger("close");if(h){a(b.modalContainer).removeClass("with-picker-modal");a(b.modalContainer).addClass("picker-modal-closing")}j.removeClass("modal-in").addClass("modal-out").transitionEnd(function(n){if(j.hasClass("modal-out")){j.trigger("closed")}else{j.trigger("opened")}if(h){a(b.modalContainer).removeClass("picker-modal-closing")}if(m||g||h){j.removeClass("modal-out").hide();if(e&&j.length>0){j.remove()}}else{if(i){j.remove()}}});if(i&&b.modalStack){a.modalStackClearQueue()}return true};function c(j){var i=a(this);var g=i.attr("href");var h=i.dataset();var f;if(i.hasClass("open-popup")){if(h.popup){f=h.popup}else{f=".popup"}a.popup(f)}if(i.hasClass("close-popup")){if(h.popup){f=h.popup}else{f=".popup.modal-in"}a.closeModal(f)}if(i.hasClass("modal-overlay")){if(a(".modal.modal-in").length>0&&b.modalCloseByOutside){a.closeModal(".modal.modal-in")}if(a(".actions-modal.modal-in").length>0&&b.actionsCloseByOutside){a.closeModal(".actions-modal.modal-in")}}if(i.hasClass("popup-overlay")){if(a(".popup.modal-in").length>0&&b.popupCloseByOutside){a.closeModal(".popup.modal-in")}}}a(document).on("click"," .modal-overlay, .popup-overlay, .close-popup, .open-popup, .close-picker",c);var b=a.modal.prototype.defaults={modalStack:true,modalButtonOk:"确定",modalButtonCancel:"取消",modalPreloaderTitle:"加载中",modalContainer:document.body?document.body:"body"}}(Zepto);+function(a){var b=false;a.custom.calendar_opened_flag=false;var c=function(g){var d=this;var h={monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["周日","周一","周二","周三","周四","周五","周六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],firstDay:1,weekendDays:[0,6],multiple:false,dateFormat:"yyyy-mm-dd",direction:"horizontal",minDate:null,maxDate:null,touchMove:true,animate:true,closeOnSelect:true,monthPicker:true,monthPickerTemplate:'<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><div class="current-month-value"></div><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',yearPicker:true,yearPickerTemplate:'<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',weekHeader:true,scrollToInput:true,inputReadOnly:true,toolbar:true,toolbarCloseText:"Done",toolbarTemplate:'<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'};g=g||{};for(var f in h){if(typeof g[f]==="undefined"){g[f]=h[f]}}d.params=g;d.initialized=false;d.inline=d.params.container?true:false;d.isH=d.params.direction==="horizontal";var i=d.isH?(b?-1:1):1;d.animating=false;function k(p){p=new Date(p);var q=p.getFullYear();var r=p.getMonth();var m=r+1;var n=p.getDate();var o=p.getDay();return d.params.dateFormat.replace(/yyyy/g,q).replace(/yy/g,(q+"").substring(2)).replace(/mm/g,m<10?"0"+m:m).replace(/m/g,m).replace(/MM/g,d.params.monthNames[r]).replace(/M/g,d.params.monthNamesShort[r]).replace(/dd/g,n<10?"0"+n:n).replace(/d/g,n).replace(/DD/g,d.params.dayNames[o]).replace(/D/g,d.params.dayNamesShort[o])}d.addValue=function(o){if(d.params.multiple){if(!d.value){d.value=[]}var n;for(var m=0;m<d.value.length;m++){if(new Date(o).getTime()===new Date(d.value[m]).getTime()){n=m}}if(typeof n==="undefined"){d.value.push(o)}else{d.value.splice(n,1)}d.updateValue()}else{d.value=[o];d.updateValue()}};d.setValue=function(m){d.value=m;d.updateValue()};d.updateValue=function(){d.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");var n,m;for(n=0;n<d.value.length;n++){var o=new Date(d.value[n]);d.wrapper.find('.picker-calendar-day[data-date="'+o.getFullYear()+"-"+o.getMonth()+"-"+o.getDate()+'"]').addClass("picker-calendar-day-selected")}if(d.params.onChange){d.params.onChange(d,d.value,d.value.map(k))}if(d.input&&d.input.length>0){if(d.params.formatValue){m=d.params.formatValue(d,d.value)}else{m=[];for(n=0;n<d.value.length;n++){m.push(k(d.value[n]))}m=m.join(", ")}a(d.input).val(m);a(d.input).trigger("change")}};d.initCalendarEvents=function(){var o;var C=true;var G,v,K,I,q,p,r,H,J,y,m,D,x,B,L;function u(M){if(v||G){return}G=true;K=p=M.type==="touchstart"?M.targetTouches[0].pageX:M.pageX;I=p=M.type==="touchstart"?M.targetTouches[0].pageY:M.pageY;r=(new Date()).getTime();x=0;C=true;L=undefined;J=y=d.monthsTranslate}function w(M){if(!G){return}q=M.type==="touchmove"?M.targetTouches[0].pageX:M.pageX;p=M.type==="touchmove"?M.targetTouches[0].pageY:M.pageY;if(typeof L==="undefined"){L=!!(L||Math.abs(p-I)>Math.abs(q-K))}if(d.isH&&L){G=false;return}M.preventDefault();if(d.animating){G=false;return}C=false;if(!v){v=true;m=d.wrapper[0].offsetWidth;D=d.wrapper[0].offsetHeight;d.wrapper.transition(0)}M.preventDefault();B=d.isH?q-K:p-I;x=B/(d.isH?m:D);y=(d.monthsTranslate*i+x)*100;d.wrapper.transform("translate3d("+(d.isH?y:0)+"%, "+(d.isH?0:y)+"%, 0)")}function z(M){if(!G||!v){G=v=false;return}G=v=false;H=new Date().getTime();if(H-r<300){if(Math.abs(B)<10){d.resetMonth()}else{if(B>=10){if(b){d.nextMonth()}else{d.prevMonth()}}else{if(b){d.prevMonth()}else{d.nextMonth()}}}}else{if(x<=-0.5){if(b){d.prevMonth()}else{d.nextMonth()}}else{if(x>=0.5){if(b){d.nextMonth()}else{d.prevMonth()}}else{d.resetMonth()}}}setTimeout(function(){C=true},100)}function F(Q){if(!C){return}var M=a(Q.target).parents(".picker-calendar-day");if(M.length===0&&a(Q.target).hasClass("picker-calendar-day")){M=a(Q.target)}if(M.length===0){return}if(M.hasClass("picker-calendar-day-selected")&&!d.params.multiple){return}if(M.hasClass("picker-calendar-day-disabled")){return}if(M.hasClass("picker-calendar-day-next")){d.nextMonth()}if(M.hasClass("picker-calendar-day-prev")){d.prevMonth()}var N=M.attr("data-year");var O=M.attr("data-month");var P=M.attr("data-day");if(d.params.onDayClick){d.params.onDayClick(d,M[0],N,O,P)}d.addValue(new Date(N,O,P).getTime());if(d.params.closeOnSelect){d.close()}}d.container.find(".picker-calendar-prev-month").off("click").on("click",d.prevMonth);d.container.find(".picker-calendar-next-month").off("click").on("click",d.nextMonth);d.container.find(".picker-calendar-prev-year").off("click").on("click",d.prevYear);d.container.find(".picker-calendar-next-year").off("click").on("click",d.nextYear);function A(M){if(v||G){return}G=true;K=p=M.type==="touchstart"?M.targetTouches[0].pageX:M.pageX;I=p=M.type==="touchstart"?M.targetTouches[0].pageY:M.pageY;r=(new Date()).getTime();x=0;C=true;L=undefined;J=y=d.yearsTranslate}function n(M){if(!G){return}q=M.type==="touchmove"?M.targetTouches[0].pageX:M.pageX;p=M.type==="touchmove"?M.targetTouches[0].pageY:M.pageY;if(typeof L==="undefined"){L=!!(L||Math.abs(p-I)>Math.abs(q-K))}if(d.isH&&L){G=false;return}M.preventDefault();if(d.animating){G=false;return}C=false;if(!v){v=true;m=d.yearsPickerWrapper[0].offsetWidth;D=d.yearsPickerWrapper[0].offsetHeight;d.yearsPickerWrapper.transition(0)}M.preventDefault();B=d.isH?q-K:p-I;x=B/(d.isH?m:D);y=(d.yearsTranslate*i+x)*100;d.yearsPickerWrapper.transform("translate3d("+(d.isH?y:0)+"%, "+(d.isH?0:y)+"%, 0)")}function E(M){if(!G||!v){G=v=false;return}G=v=false;H=new Date().getTime();if(H-r<300){if(Math.abs(B)<10){d.resetYearsGroup()}else{if(B>=10){if(b){d.nextYearsGroup()}else{d.prevYearsGroup()}}else{if(b){d.prevYearsGroup()}else{d.nextYearsGroup()}}}}else{if(x<=-0.5){if(b){d.prevYearsGroup()}else{d.nextYearsGroup()}}else{if(x>=0.5){if(b){d.nextYearsGroup()}else{d.prevYearsGroup()}}else{d.resetYearsGroup()}}}setTimeout(function(){C=true},100)}function t(){var M=a(this).text(),N=d.container.find(".picker-calendar-years-picker");N.show().transform("translate3d(0, 0, 0)");d.updateSelectedInPickers();N.on("click",".picker-calendar-year-unit",d.pickYear)}function s(){var M=d.container.find(".picker-calendar-months-picker");M.show().transform("translate3d(0, 0, 0)");d.updateSelectedInPickers();M.on("click",".picker-calendar-month-unit",d.pickMonth)}d.container.find(".current-year-value").off("click").on("click",t);d.container.find(".current-month-value").off("click").on("click",s);d.wrapper.off("click").on("click",F);if(d.params.touchMove){d.yearsPickerWrapper.off(a.touchEvents.start).on(a.touchEvents.start,A);d.yearsPickerWrapper.off(a.touchEvents.move).on(a.touchEvents.move,n);d.yearsPickerWrapper.off(a.touchEvents.end).on(a.touchEvents.end,E);d.wrapper.off(a.touchEvents.start).on(a.touchEvents.start,u);d.wrapper.off(a.touchEvents.move).on(a.touchEvents.move,w);d.wrapper.off(a.touchEvents.end).on(a.touchEvents.end,z)}d.container[0].f7DestroyCalendarEvents=function(){d.container.find(".picker-calendar-prev-month").off("click",d.prevMonth);d.container.find(".picker-calendar-next-month").off("click",d.nextMonth);d.container.find(".picker-calendar-prev-year").off("click",d.prevYear);d.container.find(".picker-calendar-next-year").off("click",d.nextYear);d.wrapper.off("click",F);if(d.params.touchMove){d.wrapper.off(a.touchEvents.start,u);d.wrapper.off(a.touchEvents.move,w);d.wrapper.off(a.touchEvents.end,z)}}};d.destroyCalendarEvents=function(m){if("f7DestroyCalendarEvents" in d.container[0]){d.container[0].f7DestroyCalendarEvents()}};d.yearsGroupHTML=function(o,q){o=new Date(o);var t=o.getFullYear(),m=new Date().getFullYear(),w=25,s=t-Math.floor(w/2),n="";if(q==="next"){s=s+w}if(q==="prev"){s=s-w}for(var r=0;r<5;r+=1){var u="";var v=r;u+='<div class="picker-calendar-row">';for(var p=0;p<5;p+=1){if(s===m){u+='<div class="picker-calendar-year-unit current-calendar-year-unit" data-year="'+s+'"><span>'+s+"</span></div>"}else{if(s===t){u+='<div class="picker-calendar-year-unit picker-calendar-year-unit-selected" data-year="'+s+'"><span>'+s+"</span></div>"}else{u+='<div class="picker-calendar-year-unit" data-year="'+s+'"><span>'+s+"</span></div>"}}s+=1}u+="</div>";n+=u}n='<div class="picker-calendar-years-group">'+n+"</div>";return n};d.pickYear=function(){var n=a(this).text(),m=d.wrapper.find(".picker-calendar-month-current").attr("data-year");d.yearsPickerWrapper.find(".picker-calendar-year-unit").removeClass("picker-calendar-year-unit-selected");a(this).addClass("picker-calendar-year-unit-selected");if(m!==n){d.setYearMonth(n);d.container.find(".picker-calendar-years-picker").hide().transform("translate3d(0, 100%, 0)")}else{d.container.find(".picker-calendar-years-picker").transform("translate3d(0, 100%, 0)")}};d.onYearsChangeEnd=function(n){d.animating=false;var m,o,q;var p=d.yearsPickerWrapper.children(".picker-calendar-years-next").find(".picker-calendar-year-unit").length;if(n==="next"){var q=parseInt(d.yearsPickerWrapper.children(".picker-calendar-years-next").find(".picker-calendar-year-unit").eq(Math.floor(p/2)).text());m=d.yearsGroupHTML(new Date(q,d.currentMonth),"next");d.yearsPickerWrapper.append(m);d.yearsPickerWrapper.children().first().remove();d.yearsGroups=d.container.find(".picker-calendar-years-group")}if(n==="prev"){var q=parseInt(d.yearsPickerWrapper.children(".picker-calendar-years-prev").find(".picker-calendar-year-unit").eq(Math.floor(p/2)).text());o=d.yearsGroupHTML(new Date(q,d.currentMonth),"prev");d.yearsPickerWrapper.prepend(o);d.yearsPickerWrapper.children().last().remove();d.yearsGroups=d.container.find(".picker-calendar-years-group")}d.setYearsTranslate(d.yearsTranslate)};d.monthsGroupHTML=function(o){o=new Date(o);var m=o.getMonth()+1,s=new Date().getMonth()+1,t=12,n=1,p="";for(var r=0;r<3;r+=1){var u="";var v=r;u+='<div class="picker-calendar-row">';for(var q=0;q<4;q+=1){if(n===s){u+='<div class="picker-calendar-month-unit current-calendar-month-unit" data-month="'+(n-1)+'"><span>'+d.params.monthNames[n-1]+"</span></div>"}else{if(n===m){u+='<div class="picker-calendar-month-unit picker-calendar-month-selected" data-month="'+(n-1)+'"><span>'+d.params.monthNames[n-1]+"</span></div>"}else{u+='<div class="picker-calendar-month-unit" data-month="'+(n-1)+'"><span>'+d.params.monthNames[n-1]+"</span></div>"}}n+=1}u+="</div>";p+=u}p='<div class="picker-calendar-months-group">'+p+"</div>";return p};d.pickMonth=function(){var n=a(this).attr("data-month"),m=d.wrapper.find(".picker-calendar-month-current").attr("data-year"),o=d.wrapper.find(".picker-calendar-month-current").attr("data-month");d.monthsPickerWrapper.find(".picker-calendar-month-unit").removeClass("picker-calendar-month-unit-selected");a(this).addClass("picker-calendar-month-unit-selected");if(o!==n){d.setYearMonth(m,n);d.container.find(".picker-calendar-months-picker").hide().transform("translate3d(0, 100%, 0)")}else{d.container.find(".picker-calendar-months-picker").transform("translate3d(0, 100%, 0)")}};d.daysInMonth=function(m){var n=new Date(m);return new Date(n.getFullYear(),n.getMonth()+1,0).getDate()};d.monthHTML=function(I,s){I=new Date(I);var z=I.getFullYear(),J=I.getMonth(),F=I.getDate();if(s==="next"){if(J===11){I=new Date(z+1,0)}else{I=new Date(z,J+1,1)}}if(s==="prev"){if(J===0){I=new Date(z-1,11)}else{I=new Date(z,J-1,1)}}if(s==="next"||s==="prev"){J=I.getMonth();z=I.getFullYear()}var A=d.daysInMonth(new Date(I.getFullYear(),I.getMonth()).getTime()-10*24*60*60*1000),m=d.daysInMonth(I),D=new Date(I.getFullYear(),I.getMonth()).getDay();if(D===0){D=7}var C,n=[],G,E,v=6,x=7,K="",B=0+(d.params.firstDay-1),H=new Date().setHours(0,0,0,0),u=d.params.minDate?new Date(d.params.minDate).getTime():null,w=d.params.maxDate?new Date(d.params.maxDate).getTime():null;if(d.value&&d.value.length){for(G=0;G<d.value.length;G++){n.push(new Date(d.value[G]).setHours(0,0,0,0))}}for(G=1;G<=v;G++){var L="";var t=G;for(E=1;E<=x;E++){var q=E;B++;var p=B-D;var y="";if(p<0){p=A+p+1;y+=" picker-calendar-day-prev";C=new Date(J-1<0?z-1:z,J-1<0?11:J-1,p).getTime()}else{p=p+1;if(p>m){p=p-m;y+=" picker-calendar-day-next";C=new Date(J+1>11?z+1:z,J+1>11?0:J+1,p).getTime()}else{C=new Date(z,J,p).getTime()}}if(C===H){y+=" picker-calendar-day-today"}if(n.indexOf(C)>=0){y+=" picker-calendar-day-selected"}if(d.params.weekendDays.indexOf(q-1)>=0){y+=" picker-calendar-day-weekend"}if((u&&C<u)||(w&&C>w)){y+=" picker-calendar-day-disabled"}C=new Date(C);var r=C.getFullYear();var o=C.getMonth();L+='<div data-year="'+r+'" data-month="'+o+'" data-day="'+p+'" class="picker-calendar-day'+(y)+'" data-date="'+(r+"-"+o+"-"+p)+'"><span>'+p+"</span></div>"}K+='<div class="picker-calendar-row">'+L+"</div>"}K='<div class="picker-calendar-month" data-year="'+z+'" data-month="'+J+'">'+K+"</div>";return K};d.animating=false;d.updateCurrentMonthYear=function(m){if(typeof m==="undefined"){d.currentMonth=parseInt(d.months.eq(1).attr("data-month"),10);d.currentYear=parseInt(d.months.eq(1).attr("data-year"),10)}else{d.currentMonth=parseInt(d.months.eq(m==="next"?(d.months.length-1):0).attr("data-month"),10);d.currentYear=parseInt(d.months.eq(m==="next"?(d.months.length-1):0).attr("data-year"),10)}d.container.find(".current-month-value").text(d.params.monthNames[d.currentMonth]);d.container.find(".current-year-value").text(d.currentYear)};d.onMonthChangeStart=function(n){d.updateCurrentMonthYear(n);d.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var m=n==="next"?d.months.length-1:0;d.months.eq(m).addClass("picker-calendar-month-current");d.months.eq(n==="next"?m-1:m+1).addClass(n==="next"?"picker-calendar-month-prev":"picker-calendar-month-next");if(d.params.onMonthYearChangeStart){d.params.onMonthYearChangeStart(d,d.currentYear,d.currentMonth)}};d.onMonthChangeEnd=function(m,q){d.animating=false;var p,n,o;d.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove();if(typeof m==="undefined"){m="next";q=true}if(!q){o=d.monthHTML(new Date(d.currentYear,d.currentMonth),m)}else{d.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove();n=d.monthHTML(new Date(d.currentYear,d.currentMonth),"prev");p=d.monthHTML(new Date(d.currentYear,d.currentMonth),"next")}if(m==="next"||q){d.wrapper.append(o||p)}if(m==="prev"||q){d.wrapper.prepend(o||n)}d.months=d.wrapper.find(".picker-calendar-month");d.setMonthsTranslate(d.monthsTranslate);if(d.params.onMonthAdd){d.params.onMonthAdd(d,m==="next"?d.months.eq(d.months.length-1)[0]:d.months.eq(0)[0])}if(d.params.onMonthYearChangeEnd){d.params.onMonthYearChangeEnd(d,d.currentYear,d.currentMonth)}d.updateSelectedInPickers()};d.updateSelectedInPickers=function(){var o=parseInt(d.wrapper.find(".picker-calendar-month-current").attr("data-year"),10),m=new Date().getFullYear(),r=parseInt(d.wrapper.find(".picker-calendar-month-current").attr("data-month"),10),n=new Date().getMonth(),q=parseInt(d.yearsPickerWrapper.find(".picker-calendar-year-unit-selected").attr("data-year"),10),p=parseInt(d.monthsPickerWrapper.find(".picker-calendar-month-unit-selected").attr("data-month"),10);if(q!==o){d.yearsPickerWrapper.find(".picker-calendar-year-unit").removeClass("picker-calendar-year-unit-selected");d.yearsPickerWrapper.find('.picker-calendar-year-unit[data-year="'+o+'"]').addClass("picker-calendar-year-unit-selected")}if(p!==r){d.monthsPickerWrapper.find(".picker-calendar-month-unit").removeClass("picker-calendar-month-unit-selected");d.monthsPickerWrapper.find('.picker-calendar-month-unit[data-month="'+r+'"]').addClass("picker-calendar-month-unit-selected")}if(m!==o){d.monthsPickerWrapper.find(".picker-calendar-month-unit").removeClass("current-calendar-month-unit")}else{d.monthsPickerWrapper.find('.picker-calendar-month-unit[data-month="'+n+'"]').addClass("current-calendar-month-unit")}};d.setYearsTranslate=function(p){p=p||d.yearsTranslate||0;if(typeof d.yearsTranslate==="undefined"){d.yearsTranslate=p}d.yearsGroups.removeClass("picker-calendar-years-current picker-calendar-years-prev picker-calendar-years-next");var o=-(p+1)*100*i;var m=-p*100*i;var n=-(p-1)*100*i;d.yearsGroups.eq(0).transform("translate3d("+(d.isH?o:0)+"%, "+(d.isH?0:o)+"%, 0)").addClass("picker-calendar-years-prev");d.yearsGroups.eq(1).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)").addClass("picker-calendar-years-current");d.yearsGroups.eq(2).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)").addClass("picker-calendar-years-next")};d.nextYearsGroup=function(o){if(typeof o==="undefined"||typeof o==="object"){o="";if(!d.params.animate){o=0}}var m=d.animating?false:true;d.yearsTranslate--;d.animating=true;var n=(d.yearsTranslate*100)*i;d.yearsPickerWrapper.transition(o).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)");if(m){d.yearsPickerWrapper.transitionEnd(function(){d.onYearsChangeEnd("next")})}if(!d.params.animate){d.onYearsChangeEnd("next")}};d.prevYearsGroup=function(o){if(typeof o==="undefined"||typeof o==="object"){o="";if(!d.params.animate){o=0}}var m=d.animating?false:true;d.yearsTranslate++;d.animating=true;var n=(d.yearsTranslate*100)*i;d.yearsPickerWrapper.transition(o).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)");if(m){d.yearsPickerWrapper.transitionEnd(function(){d.onYearsChangeEnd("prev")})}if(!d.params.animate){d.onYearsChangeEnd("prev")}};d.resetYearsGroup=function(n){if(typeof n==="undefined"){n=""}var m=(d.yearsTranslate*100)*i;d.yearsPickerWrapper.transition(n).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)")};d.setMonthsTranslate=function(p){p=p||d.monthsTranslate||0;if(typeof d.monthsTranslate==="undefined"){d.monthsTranslate=p}d.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");var n=-(p+1)*100*i;var o=-p*100*i;var m=-(p-1)*100*i;d.months.eq(0).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)").addClass("picker-calendar-month-prev");d.months.eq(1).transform("translate3d("+(d.isH?o:0)+"%, "+(d.isH?0:o)+"%, 0)").addClass("picker-calendar-month-current");d.months.eq(2).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)").addClass("picker-calendar-month-next")};d.nextMonth=function(r){if(typeof r==="undefined"||typeof r==="object"){r="";if(!d.params.animate){r=0}}var q=parseInt(d.months.eq(d.months.length-1).attr("data-month"),10);var s=parseInt(d.months.eq(d.months.length-1).attr("data-year"),10);var o=new Date(s,q);var n=o.getTime();var t=d.animating?false:true;if(d.params.maxDate){if(n>new Date(d.params.maxDate).getTime()){return d.resetMonth()}}d.monthsTranslate--;if(q===d.currentMonth){var u=-(d.monthsTranslate)*100*i;var p=a(d.monthHTML(n,"next")).transform("translate3d("+(d.isH?u:0)+"%, "+(d.isH?0:u)+"%, 0)").addClass("picker-calendar-month-next");d.wrapper.append(p[0]);d.months=d.wrapper.find(".picker-calendar-month");if(d.params.onMonthAdd){d.params.onMonthAdd(d,d.months.eq(d.months.length-1)[0])}}d.animating=true;d.onMonthChangeStart("next");var m=(d.monthsTranslate*100)*i;d.wrapper.transition(r).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)");if(t){d.wrapper.transitionEnd(function(){d.onMonthChangeEnd("next")})}if(!d.params.animate){d.onMonthChangeEnd("next")}};d.prevMonth=function(s){if(typeof s==="undefined"||typeof s==="object"){s="";if(!d.params.animate){s=0}}var o=parseInt(d.months.eq(0).attr("data-month"),10);var r=parseInt(d.months.eq(0).attr("data-year"),10);var m=new Date(r,o+1,-1);var t=m.getTime();var u=d.animating?false:true;if(d.params.minDate){if(t<new Date(d.params.minDate).getTime()){return d.resetMonth()}}d.monthsTranslate++;if(o===d.currentMonth){var p=-(d.monthsTranslate)*100*i;var q=a(d.monthHTML(t,"prev")).transform("translate3d("+(d.isH?p:0)+"%, "+(d.isH?0:p)+"%, 0)").addClass("picker-calendar-month-prev");d.wrapper.prepend(q[0]);d.months=d.wrapper.find(".picker-calendar-month");if(d.params.onMonthAdd){d.params.onMonthAdd(d,d.months.eq(0)[0])}}d.animating=true;d.onMonthChangeStart("prev");var n=(d.monthsTranslate*100)*i;d.wrapper.transition(s).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)");if(u){d.wrapper.transitionEnd(function(){d.onMonthChangeEnd("prev")})}if(!d.params.animate){d.onMonthChangeEnd("prev")}};d.resetMonth=function(n){if(typeof n==="undefined"){n=""}var m=(d.monthsTranslate*100)*i;d.wrapper.transition(n).transform("translate3d("+(d.isH?m:0)+"%, "+(d.isH?0:m)+"%, 0)")};d.setYearMonth=function(s,p,r){if(typeof s==="undefined"){s=d.currentYear}if(typeof p==="undefined"){p=d.currentMonth}if(typeof r==="undefined"||typeof r==="object"){r="";if(!d.params.animate){r=0}}var q;if(s<d.currentYear){q=new Date(s,p+1,-1).getTime()}else{q=new Date(s,p).getTime()}if(d.params.maxDate&&q>new Date(d.params.maxDate).getTime()){return false}if(d.params.minDate&&q<new Date(d.params.minDate).getTime()){return false}var m=new Date(d.currentYear,d.currentMonth).getTime();var o=q>m?"next":"prev";var u=d.monthHTML(new Date(s,p));d.monthsTranslate=d.monthsTranslate||0;var w=d.monthsTranslate;var v,n;var t=d.animating?false:true;if(q>m){d.monthsTranslate--;if(!d.animating){d.months.eq(d.months.length-1).remove()}d.wrapper.append(u);d.months=d.wrapper.find(".picker-calendar-month");v=-(w-1)*100*i;d.months.eq(d.months.length-1).transform("translate3d("+(d.isH?v:0)+"%, "+(d.isH?0:v)+"%, 0)").addClass("picker-calendar-month-next")}else{d.monthsTranslate++;if(!d.animating){d.months.eq(0).remove()}d.wrapper.prepend(u);d.months=d.wrapper.find(".picker-calendar-month");v=-(w+1)*100*i;d.months.eq(0).transform("translate3d("+(d.isH?v:0)+"%, "+(d.isH?0:v)+"%, 0)").addClass("picker-calendar-month-prev")}if(d.params.onMonthAdd){d.params.onMonthAdd(d,o==="next"?d.months.eq(d.months.length-1)[0]:d.months.eq(0)[0])}d.animating=true;d.onMonthChangeStart(o);n=(d.monthsTranslate*100)*i;d.wrapper.transition(r).transform("translate3d("+(d.isH?n:0)+"%, "+(d.isH?0:n)+"%, 0)");if(t){d.wrapper.transitionEnd(function(){d.onMonthChangeEnd(o,true)})}if(!d.params.animate){d.onMonthChangeEnd(o)}};d.nextYear=function(){d.setYearMonth(d.currentYear+1)};d.prevYear=function(){d.setYearMonth(d.currentYear-1)};d.layout=function(){var o="";var p="";var u;var r=d.value&&d.value.length?d.value[0]:new Date().setHours(0,0,0,0);var A=d.yearsGroupHTML(r,"prev");var C=d.yearsGroupHTML(r);var z=d.yearsGroupHTML(r,"next");var n='<div class="picker-calendar-years-picker"><div class="picker-calendar-years-picker-wrapper">'+(A+C+z)+"</div></div>";var x='<div class="picker-calendar-months-picker"><div class="picker-calendar-months-picker-wrapper">'+d.monthsGroupHTML(r)+"</div></div>";var w=d.monthHTML(r,"prev");var t=d.monthHTML(r);var s=d.monthHTML(r,"next");var q='<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">'+(w+t+s)+"</div></div>";var v="";if(d.params.weekHeader){for(u=0;u<7;u++){var y=(u+d.params.firstDay>6)?(u-7+d.params.firstDay):(u+d.params.firstDay);var B=d.params.dayNamesShort[y];v+='<div class="picker-calendar-week-day '+((d.params.weekendDays.indexOf(y)>=0)?"picker-calendar-week-day-weekend":"")+'"> '+B+"</div>"}v='<div class="picker-calendar-week-days">'+v+"</div>"}p="picker-modal picker-calendar "+(d.params.cssClass||"");var m=d.params.toolbar?d.params.toolbarTemplate.replace(/{{closeText}}/g,d.params.toolbarCloseText):"";if(d.params.toolbar){m=d.params.toolbarTemplate.replace(/{{closeText}}/g,d.params.toolbarCloseText).replace(/{{monthPicker}}/g,(d.params.monthPicker?d.params.monthPickerTemplate:"")).replace(/{{yearPicker}}/g,(d.params.yearPicker?d.params.yearPickerTemplate:""))}o='<div class="'+(p)+'">'+m+'<div class="picker-modal-inner">'+v+q+"</div>"+x+n+"</div>";d.pickerHTML=o};function e(s){s.preventDefault();if(a.device.isWeixin&&a.device.android&&d.params.inputReadOnly){this.focus();this.blur()}if(a.custom.calendar_opened_flag){return}d.open();if(d.params.scrollToInput){var m=d.input.parents(".content");if(m.length===0){return}var u=parseInt(m.css("padding-top"),10),p=parseInt(m.css("padding-bottom"),10),q=m[0].offsetHeight-u-d.container.height(),n=m[0].scrollHeight-u-d.container.height(),r;var t=d.input.offset().top-u+d.input[0].offsetHeight;if(t>q){var o=m.scrollTop()+t-q;if(o+q>n){r=o+q-n+p;if(q===n){r=d.container.height()}m.css({"padding-bottom":(r)+"px"})}m.scrollTop(o,300)}}}function l(m){if(d.input&&d.input.length>0){if(m.target!==d.input[0]&&a(m.target).parents(".picker-modal").length===0){d.close()}}else{if(a(m.target).parents(".picker-modal").length===0){d.close()}}}if(d.params.input){d.input=a(d.params.input);if(d.input.length>0){if(d.params.inputReadOnly){d.input.prop("readOnly",true)}if(!d.inline){d.input.off("click").on("click",e)}}}if(!d.inline){a("html").off("click").on("click",l)}function j(){a.custom.calendar_opened_flag=false;if(d.input&&d.input.length>0){d.input.parents(".content").css({"padding-bottom":""})}if(d.params.onClose){d.params.onClose(d)}d.destroyCalendarEvents()}d.open=function(){var m=false;if(!a.custom.calendar_opened_flag){if(!d.value){if(d.params.value){d.value=d.params.value}}d.layout();if(d.inline){d.container=a(d.pickerHTML);d.container.addClass("picker-modal-inline");a(d.params.container).append(d.container)}else{a.openSuperModal();d.container=a(a.pickerModal(d.pickerHTML));a(d.container).off("close").on("close",function(){j()})}d.container[0].f7Calendar=d;d.wrapper=d.container.find(".picker-calendar-months-wrapper");d.yearsPickerWrapper=d.container.find(".picker-calendar-years-picker-wrapper");d.yearsGroups=d.yearsPickerWrapper.find(".picker-calendar-years-group");d.monthsPickerWrapper=d.container.find(".picker-calendar-months-picker-wrapper");d.months=d.wrapper.find(".picker-calendar-month");d.updateCurrentMonthYear();d.yearsTranslate=0;d.setYearsTranslate();d.monthsTranslate=0;d.setMonthsTranslate();d.initCalendarEvents();if(m){d.updateValue()}}a.custom.calendar_opened_flag=true;d.initialized=true;if(d.params.onMonthAdd){d.months.each(function(){d.params.onMonthAdd(d,this)})}if(d.params.onOpen){d.params.onOpen(d)}};d.close=function(){closePicker(d.container);return};d.destroy=function(){d.close();if(d.params.input&&d.input.length>0){d.input.off("click",e)}a("html").off("click",l)};if(d.inline){d.open()}return d};a.fn.calendar=function(d){return this.each(function(){var f=a(this);if(!f[0]){return}var e={};if(f[0].tagName.toUpperCase()==="INPUT"){e.input=f}else{e.container=f}new c(a.extend(e,d))})};a.initCalendar=function(e){var d=e?a(e):a(document.body);d.find("[data-toggle='date']").each(function(){a(this).calendar()})}}(Zepto);+function(b){var a=function(f){var c=this;var g={updateValuesOnMomentum:false,updateValuesOnTouchmove:true,rotateEffect:false,momentumRatio:7,freeMode:false,scrollToInput:true,inputReadOnly:true,toolbar:true,toolbarCloseText:"确定",toolbarTemplate:'<header class="bar bar-nav">                <button class="button button-link pull-right close-picker">确定</button>                <h1 class="title">请选择</h1>                </header>'};f=f||{};for(var e in g){if(typeof f[e]==="undefined"){f[e]=g[e]}}c.params=f;c.cols=[];c.initialized=false;c.inline=c.params.container?true:false;var h=b.device.ios||(navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0)&&!b.device.android;c.setValue=function(m,o){var n=0;for(var l=0;l<c.cols.length;l++){if(c.cols[l]&&!c.cols[l].divider){c.cols[l].setValue(m[n],o);n++}}};c.updateValue=function(){var n=[];var l=[];for(var m=0;m<c.cols.length;m++){if(!c.cols[m].divider){n.push(c.cols[m].value);l.push(c.cols[m].displayValue)}}if(n.indexOf(undefined)>=0){return}c.value=n;c.displayValue=l;if(c.params.onChange){c.params.onChange(c,c.value,c.displayValue)}if(c.input&&c.input.length>0){b(c.input).val(c.params.formatValue?c.params.formatValue(c,c.value,c.displayValue):c.value.join(" "));b(c.input).trigger("change")}};c.initPickerCol=function(y,w){var C=b(y);var B=C.index();var n=c.cols[B];if(n.divider){return}n.container=C;n.wrapper=n.container.find(".picker-items-col-wrapper");n.items=n.wrapper.find(".picker-item");var J,G;var F,E,p,Q,m;n.replaceValues=function(R,S){n.destroyEvents();n.values=R;n.displayValues=S;var T=c.columnHTML(n,true);n.wrapper.html(T);n.items=n.wrapper.find(".picker-item");n.calcSize();n.setValue(n.values[0],0,true);n.initEvents()};n.calcSize=function(){if(c.params.rotateEffect){n.container.removeClass("picker-items-col-absolute");if(!n.width){n.container.css({width:""})}}var R,S;R=0;S=n.container[0].offsetHeight;F=n.wrapper[0].offsetHeight;E=n.items[0].offsetHeight;p=E*n.items.length;Q=S/2-p+E/2;m=S/2-E/2;if(n.width){R=n.width;if(parseInt(R,10)===R){R=R+"px"}n.container.css({width:R})}if(c.params.rotateEffect){if(!n.width){n.items.each(function(){var T=b(this);T.css({width:"auto"});R=Math.max(R,T[0].offsetWidth);T.css({width:""})});n.container.css({width:(R+2)+"px"})}n.container.addClass("picker-items-col-absolute")}};n.calcSize();n.wrapper.transform("translate3d(0,"+m+"px,0)").transition(0);var I=0;var t;n.setValue=function(T,U,R){if(typeof U==="undefined"){U=""}var V=n.wrapper.find('.picker-item[data-picker-value="'+T+'"]').index();if(typeof V==="undefined"||V===-1){return}var S=-V*E+m;n.wrapper.transition(U);n.wrapper.transform("translate3d(0,"+(S)+"px,0)");if(c.params.updateValuesOnMomentum&&n.activeIndex&&n.activeIndex!==V){b.cancelAnimationFrame(t);n.wrapper.transitionEnd(function(){b.cancelAnimationFrame(t)});s()}n.updateItems(V,S,U,R)};n.updateItems=function(R,X,W,T){if(typeof X==="undefined"){X=b.getTranslate(n.wrapper[0],"y")}if(typeof R==="undefined"){R=-Math.round((X-m)/E)}if(R<0){R=0}if(R>=n.items.length){R=n.items.length-1}var U=n.activeIndex;n.activeIndex=R;n.wrapper.find(".picker-selected").removeClass("picker-selected");if(c.params.rotateEffect){n.items.transition(W)}var V=n.items.eq(R).addClass("picker-selected").transform("");if(T||typeof T==="undefined"){n.value=V.attr("data-picker-value");n.displayValue=n.displayValues?n.displayValues[R]:n.value;if(U!==R){if(n.onChange){n.onChange(c,n.value,n.displayValue)}c.updateValue()}}if(!c.params.rotateEffect){return}var S=(X-(Math.floor((X-m)/E)*E+m))/E;n.items.each(function(){var ab=b(this);var ad=ab.index()*E;var Z=m-X;var ac=ad-Z;var Y=ac/E;var aa=Math.ceil(n.height/E/2)+1;var ae=(-18*Y);if(ae>180){ae=180}if(ae<-180){ae=-180}if(Math.abs(Y)>aa){ab.addClass("picker-item-far")}else{ab.removeClass("picker-item-far")}ab.transform("translate3d(0, "+(-X+m)+"px, "+(h?-110:0)+"px) rotateX("+ae+"deg)")})};function s(){t=b.requestAnimationFrame(function(){n.updateItems(undefined,undefined,0);s()})}if(w){n.updateItems(0,m,0)}var D=true;var K,v,N,o,q,M,O,P,z,H,l,L;function u(R){if(v||K){return}R.preventDefault();K=true;N=o=R.type==="touchstart"?R.targetTouches[0].pageY:R.pageY;q=(new Date()).getTime();D=true;O=z=b.getTranslate(n.wrapper[0],"y")}function x(S){if(!K){return}S.preventDefault();D=false;o=S.type==="touchmove"?S.targetTouches[0].pageY:S.pageY;if(!v){b.cancelAnimationFrame(t);v=true;O=z=b.getTranslate(n.wrapper[0],"y");n.wrapper.transition(0)}S.preventDefault();var R=o-N;z=O+R;P=undefined;if(z<Q){z=Q-Math.pow(Q-z,0.8);P="min"}if(z>m){z=m+Math.pow(z-m,0.8);P="max"}n.wrapper.transform("translate3d(0,"+z+"px,0)");n.updateItems(undefined,z,0,c.params.updateValuesOnTouchmove);l=z-H||z;L=(new Date()).getTime();H=z}function A(U){if(!K||!v){K=v=false;return}K=v=false;n.wrapper.transition("");if(P){if(P==="min"){n.wrapper.transform("translate3d(0,"+Q+"px,0)")}else{n.wrapper.transform("translate3d(0,"+m+"px,0)")}}M=new Date().getTime();var T,S;if(M-q>300){S=z}else{T=Math.abs(l/(M-L));S=z+l*c.params.momentumRatio}S=Math.max(Math.min(S,m),Q);var R=-Math.floor((S-m)/E);if(!c.params.freeMode){S=-R*E+m}n.wrapper.transform("translate3d(0,"+(parseInt(S,10))+"px,0)");n.updateItems(R,S,"",true);if(c.params.updateValuesOnMomentum){s();n.wrapper.transitionEnd(function(){b.cancelAnimationFrame(t)})}setTimeout(function(){D=true},100)}function r(S){if(!D){return}b.cancelAnimationFrame(t);var R=b(this).attr("data-picker-value");n.setValue(R)}n.initEvents=function(R){var S=R?"off":"on";n.container[S](b.touchEvents.start,u);n.container[S](b.touchEvents.move,x);n.container[S](b.touchEvents.end,A);n.items[S]("click",r)};n.destroyEvents=function(){n.initEvents(true)};n.container[0].f7DestroyPickerCol=function(){n.destroyEvents()};n.initEvents()};c.destroyPickerCol=function(l){l=b(l);if("f7DestroyPickerCol" in l[0]){l[0].f7DestroyPickerCol()}};function i(){if(!c.opened){return}for(var l=0;l<c.cols.length;l++){if(!c.cols[l].divider){c.cols[l].calcSize();c.cols[l].setValue(c.cols[l].value,0,false)}}}b(window).on("resize",i);c.columnHTML=function(p,m){var n="";var l="";if(p.divider){l+='<div class="picker-items-col picker-items-col-divider '+(p.textAlign?"picker-items-col-"+p.textAlign:"")+" "+(p.cssClass||"")+'">'+p.content+"</div>"}else{for(var o=0;o<p.values.length;o++){n+='<div class="picker-item" data-picker-value="'+p.values[o]+'">'+(p.displayValues?p.displayValues[o]:p.values[o])+"</div>"}l+='<div class="picker-items-col '+(p.textAlign?"picker-items-col-"+p.textAlign:"")+" "+(p.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return m?n:l};c.layout=function(){var p="";var o="";var n;c.cols=[];var l="";for(n=0;n<c.params.cols.length;n++){var m=c.params.cols[n];l+=c.columnHTML(c.params.cols[n]);c.cols.push(m)}o="picker-modal picker-columns "+(c.params.cssClass||"")+(c.params.rotateEffect?" picker-3d":"");p='<div class="'+(o)+'">'+(c.params.toolbar?c.params.toolbarTemplate.replace(/{{closeText}}/g,c.params.toolbarCloseText):"")+'<div class="picker-modal-inner picker-items">'+l+'<div class="picker-center-highlight"></div></div></div>';c.pickerHTML=p};function d(r){r.preventDefault();if(b.device.isWeixin&&b.device.android&&c.params.inputReadOnly){this.focus();this.blur()}if(c.opened){return}b.closeModal(b(".picker-modal"));c.open();if(c.params.scrollToInput){var l=c.input.parents(".content");if(l.length===0){return}var t=parseInt(l.css("padding-top"),10),o=parseInt(l.css("padding-bottom"),10),p=l[0].offsetHeight-t-c.container.height(),m=l[0].scrollHeight-t-c.container.height(),q;var s=c.input.offset().top-t+c.input[0].offsetHeight;if(s>p){var n=l.scrollTop()+s-p;if(n+p>m){q=n+p-m+o;if(p===m){q=c.container.height()}l.css({"padding-bottom":(q)+"px"})}l.scrollTop(n,300)}}r.stopPropagation()}function k(l){if(!c.opened){return}if(c.input&&c.input.length>0){if(l.target!==c.input[0]&&b(l.target).parents(".picker-modal").length===0){c.close()}}else{if(b(l.target).parents(".picker-modal").length===0){c.close()}}}if(c.params.input){c.input=b(c.params.input);if(c.input.length>0){if(c.params.inputReadOnly){c.input.prop("readOnly",true)}if(!c.inline){c.input.off("click").on("click",d)}}}if(!c.inline){b("html").off("click").on("click",k)}function j(){c.opened=false;if(c.input&&c.input.length>0){c.input.parents(".content").css({"padding-bottom":""})}if(c.params.onClose){c.params.onClose(c)}c.container.find(".picker-items-col").each(function(){c.destroyPickerCol(this)})}c.opened=false;c.open=function(){if(!c.opened){c.layout();c.opened=true;if(c.inline){c.container=b(c.pickerHTML);c.container.addClass("picker-modal-inline");b(c.params.container).append(c.container)}else{c.container=b(b.pickerModal(c.pickerHTML));b(c.container).on("close",function(){j()})}c.container[0].f7Picker=c;c.container.find(".picker-items-col").each(function(){var l=true;if((!c.initialized&&c.params.value)||(c.initialized&&c.value)){l=false}c.initPickerCol(this,l)});if(!c.initialized){if(c.params.value){c.setValue(c.params.value,0)}}else{if(c.value){c.setValue(c.value,0)}}}c.initialized=true;if(c.params.onOpen){c.params.onOpen(c)}};c.close=function(){if(!c.opened||c.inline){return}b.closeModal(c.container);return};c.destroy=function(){c.close();if(c.params.input&&c.input.length>0){c.input.off("click",d)}b("html").off("click",k);b(window).off("resize",i)};if(c.inline){c.open()}return c};b(document).on("click",".close-picker",function(){var c=b(".picker-modal.modal-in");b.closeModal(c)});b.fn.picker=function(d){var c=arguments;return this.each(function(){if(!this){return}var g=b(this);var e=g.data("picker");if(!e){var f=b.extend({input:this,value:g.val()?g.val().split(" "):""},d);e=new a(f);g.data("picker",e)}if(typeof d===typeof"a"){e[d].apply(e,Array.prototype.slice.call(c,1))}})}}(Zepto);+function(f){var b=new Date();var d=function(j){var l=[];for(var k=1;k<=(j||31);k++){l.push(k<10?"0"+k:k)}return l};var e=function(k,j){var i=new Date(j,parseInt(k)+1-1,1);var l=new Date(i-1);return d(l.getDate())};var c=function(i){return i<10?"0"+i:i};var h=("01 02 03 04 05 06 07 08 09 10 11 12").split(" ");var a=(function(){var j=[];for(var k=1950;k<=2030;k++){j.push(k)}return j})();var g={rotateEffect:false,value:[b.getFullYear(),c(b.getMonth()+1),c(b.getDate()),b.getHours(),c(b.getMinutes())],onChange:function(j,i,l){var m=e(j.cols[1].value,j.cols[0].value);var k=j.cols[2].value;if(k>m.length){k=m.length}j.cols[2].setValue(k)},formatValue:function(k,i,j){return j[0]+"-"+i[1]+"-"+i[2]+" "+i[3]+":"+i[4]},cols:[{values:a},{values:h},{values:d()},{divider:true,content:"  "},{values:(function(){var j=[];for(var k=0;k<=23;k++){j.push(k)}return j})()},{divider:true,content:":"},{values:(function(){var j=[];for(var k=0;k<=59;k++){j.push(k<10?"0"+k:k)}return j})()}]};f.fn.datetimePicker=function(i){return this.each(function(){if(!this){return}var j=f.extend(g,i);f(this).picker(j);if(i.value){f(this).val(j.formatValue(j,j.value,j.value))}})}}(Zepto);+function(d){var f=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(g){d.setTimeout(g,1000/60)};var b=(function(){var k={};var l=document.createElement("div").style;var i=(function(){var p=["t","webkitT","MozT","msT","OT"],n,o=0,m=p.length;for(;o<m;o++){n=p[o]+"ransform";if(n in l){return p[o].substr(0,p[o].length-1)}}return false})();function j(m){if(i===false){return false}if(i===""){return m}return i+m.charAt(0).toUpperCase()+m.substr(1)}k.getTime=Date.now||function g(){return new Date().getTime()};k.extend=function(o,n){for(var m in n){o[m]=n[m]}};k.addEvent=function(p,o,n,m){p.addEventListener(o,n,!!m)};k.removeEvent=function(p,o,n,m){p.removeEventListener(o,n,!!m)};k.prefixPointerEvent=function(m){return d.MSPointerEvent?"MSPointer"+m.charAt(9).toUpperCase()+m.substr(10):m};k.momentum=function(v,o,q,m,w,x,A){var n=v-o,p=Math.abs(n)/q,y,s;p=p/2;p=p>1.5?1.5:p;x=x===undefined?0.0006:x;y=v+(p*p)/(2*x)*(n<0?-1:1);s=p/x;if(y<m){y=w?m-(w/2.5*(p/8)):m;n=Math.abs(y-v);s=n/p}else{if(y>0){y=w?w/2.5*(p/8):0;n=Math.abs(v)+y;s=n/p}}var z=+new Date();var r=z;function u(){if(+new Date()-r>50){A._execEvent("scroll");r=+new Date()}if(+new Date()-z<s){f(u)}}f(u);return{destination:Math.round(y),duration:s}};var h=j("transform");k.extend(k,{hasTransform:h!==false,hasPerspective:j("perspective") in l,hasTouch:"ontouchstart" in d,hasPointer:d.PointerEvent||d.MSPointerEvent,hasTransition:j("transition") in l});k.isBadAndroid=/Android /.test(d.navigator.appVersion)&&!(/Chrome\/\d/.test(d.navigator.appVersion))&&false;k.extend(k.style={},{transform:h,transitionTimingFunction:j("transitionTimingFunction"),transitionDuration:j("transitionDuration"),transitionDelay:j("transitionDelay"),transformOrigin:j("transformOrigin")});k.hasClass=function(n,o){var m=new RegExp("(^|\\s)"+o+"(\\s|$)");return m.test(n.className)};k.addClass=function(n,o){if(k.hasClass(n,o)){return}var m=n.className.split(" ");m.push(o);n.className=m.join(" ")};k.removeClass=function(n,o){if(!k.hasClass(n,o)){return}var m=new RegExp("(^|\\s)"+o+"(\\s|$)","g");n.className=n.className.replace(m," ")};k.offset=function(m){var o=-m.offsetLeft,n=-m.offsetTop;while(m=m.offsetParent){o-=m.offsetLeft;n-=m.offsetTop}return{left:o,top:n}};k.preventDefaultException=function(o,n){for(var m in n){if(n[m].test(o[m])){return true}}return false};k.extend(k.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});k.extend(k.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(m){return m*(2-m)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(m){return Math.sqrt(1-(--m*m))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(n){var m=4;return(n=n-1)*n*((m+1)*n+m)+1}},bounce:{style:"",fn:function(m){if((m/=1)<(1/2.75)){return 7.5625*m*m}else{if(m<(2/2.75)){return 7.5625*(m-=(1.5/2.75))*m+0.75}else{if(m<(2.5/2.75)){return 7.5625*(m-=(2.25/2.75))*m+0.9375}else{return 7.5625*(m-=(2.625/2.75))*m+0.984375}}}}},elastic:{style:"",fn:function(m){var n=0.22,o=0.4;if(m===0){return 0}if(m===1){return 1}return(o*Math.pow(2,-10*m)*Math.sin((m-n/4)*(2*Math.PI)/n)+1)}}});k.tap=function(o,m){var n=document.createEvent("Event");n.initEvent(m,true,true);n.pageX=o.pageX;n.pageY=o.pageY;o.target.dispatchEvent(n)};k.click=function(o){var n=o.target,m;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(n.tagName)){m=document.createEvent("MouseEvents");m.initMouseEvent("click",true,true,o.view,1,n.screenX,n.screenY,n.clientX,n.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null);m._constructed=true;n.dispatchEvent(m)}};return k})();function e(j,g){this.wrapper=typeof j==="string"?document.querySelector(j):j;this.scroller=$(this.wrapper).find(".content-inner")[0];this.scrollerStyle=this.scroller&&this.scroller.style;this.options={scrollbars:true,fadeScrollbars:true,resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"circular",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|A)$/},HWCompositing:true,useTransition:true,useTransform:true,eventPassthrough:undefined};for(var h in g){this.options[h]=g[h]}this.translateZ=this.options.HWCompositing&&b.hasPerspective?" translateZ(0)":"";this.options.useTransition=b.hasTransition&&this.options.useTransition;this.options.useTransform=b.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough==="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough==="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing==="string"?b.ease[this.options.bounceEasing]||b.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.shrinkScrollbars==="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;if(this.options.probeType===3){this.options.useTransition=false}this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}e.prototype={version:"5.1.3",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(g){if(g.target!==this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(h){if(b.eventType[h.type]!==1){if(h.button!==0){return}}if(!this.enabled||(this.initiated&&b.eventType[h.type]!==this.initiated)){return}if(this.options.preventDefault&&!b.isBadAndroid&&!b.preventDefaultException(h.target,this.options.preventDefaultException)){h.preventDefault()}var g=h.touches?h.touches[0]:h,i;this.initiated=b.eventType[h.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=b.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;i=this.getComputedPosition();this._translate(Math.round(i.x),Math.round(i.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=g.pageX;this.pointY=g.pageY;this._execEvent("beforeScrollStart")},_move:function(l){if(!this.enabled||b.eventType[l.type]!==this.initiated){return}if(this.options.preventDefault){l.preventDefault()}var n=l.touches?l.touches[0]:l,i=n.pageX-this.pointX,h=n.pageY-this.pointY,m=b.getTime(),g,o,k,j;this.pointX=n.pageX;this.pointY=n.pageY;this.distX+=i;this.distY+=h;k=Math.abs(this.distX);j=Math.abs(this.distY);if(m-this.endTime>300&&(k<10&&j<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(k>j+this.options.directionLockThreshold){this.directionLocked="h"}else{if(j>=k+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked==="h"){if(this.options.eventPassthrough==="vertical"){l.preventDefault()}else{if(this.options.eventPassthrough==="horizontal"){this.initiated=false;return}}h=0}else{if(this.directionLocked==="v"){if(this.options.eventPassthrough==="horizontal"){l.preventDefault()}else{if(this.options.eventPassthrough==="vertical"){this.initiated=false;return}}i=0}}i=this.hasHorizontalScroll?i:0;h=this.hasVerticalScroll?h:0;g=this.x+i;o=this.y+h;if(g>0||g<this.maxScrollX){g=this.options.bounce?this.x+i/3:g>0?0:this.maxScrollX}if(o>0||o<this.maxScrollY){o=this.options.bounce?this.y+h/3:o>0?0:this.maxScrollY}this.directionX=i>0?-1:i<0?1:0;this.directionY=h>0?-1:h<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(g,o);if(m-this.startTime>300){this.startTime=m;this.startX=this.x;this.startY=this.y;if(this.options.probeType===1){this._execEvent("scroll")}}if(this.options.probeType>1){this._execEvent("scroll")}},_end:function(m){if(!this.enabled||b.eventType[m.type]!==this.initiated){return}if(this.options.preventDefault&&!b.preventDefaultException(m.target,this.options.preventDefaultException)){m.preventDefault()}var i,h,l=b.getTime()-this.startTime,g=Math.round(this.x),q=Math.round(this.y),p=Math.abs(g-this.startX),o=Math.abs(q-this.startY),j=0,n="";this.isInTransition=0;this.initiated=0;this.endTime=b.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(g,q);if(!this.moved){if(this.options.tap){b.tap(m,this.options.tap)}if(this.options.click){b.click(m)}this._execEvent("scrollCancel");return}if(this._events.flick&&l<200&&p<100&&o<100){this._execEvent("flick");return}if(this.options.momentum&&l<300){i=this.hasHorizontalScroll?b.momentum(this.x,this.startX,l,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration,this):{destination:g,duration:0};h=this.hasVerticalScroll?b.momentum(this.y,this.startY,l,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration,this):{destination:q,duration:0};g=i.destination;q=h.destination;j=Math.max(i.duration,h.duration);this.isInTransition=1}if(this.options.snap){var k=this._nearestSnap(g,q);this.currentPage=k;j=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(g-k.x),1000),Math.min(Math.abs(q-k.y),1000)),300);g=k.x;q=k.y;this.directionX=0;this.directionY=0;n=this.options.bounceEasing}if(g!==this.x||q!==this.y){if(g>0||g<this.maxScrollX||q>0||q<this.maxScrollY){n=b.ease.quadratic}this.scrollTo(g,q,j,n);return}this._execEvent("scrollEnd")},_resize:function(){var g=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){g.refresh()},this.options.resizePolling)},resetPosition:function(i){var g=this.x,j=this.y;i=i||0;if(!this.hasHorizontalScroll||this.x>0){g=0}else{if(this.x<this.maxScrollX){g=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){j=0}else{if(this.y<this.maxScrollY){j=this.maxScrollY}}if(g===this.x&&j===this.y){return false}if(this.options.ptr&&this.y>44&&this.startY*-1<getScreenHeight()&&!this.ptrLock){j=this.options.ptrOffset||44;this._execEvent("ptr");this.ptrLock=true;var h=this;setTimeout(function(){h.ptrLock=false},500)}this.scrollTo(g,j,i,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=b.offset(this.wrapper);this._execEvent("refresh")},on:function(h,g){if(!this._events[h]){this._events[h]=[]}this._events[h].push(g)},off:function(i,h){if(!this._events[i]){return}var g=this._events[i].indexOf(h);if(g>-1){this._events[i].splice(g,1)}},_execEvent:function(j){if(!this._events[j]){return}var h=0,g=this._events[j].length;if(!g){return}for(;h<g;h++){this._events[j][h].apply(this,[].slice.call(arguments,1))}},scrollBy:function(g,j,h,i){g=this.x+g;j=this.y+j;h=h||0;this.scrollTo(g,j,h,i)},scrollTo:function(g,j,h,i){i=i||b.ease.circular;this.isInTransition=this.options.useTransition&&h>0;if(!h||(this.options.useTransition&&i.style)){this._transitionTimingFunction(i.style);this._transitionTime(h);this._translate(g,j)}else{this._animate(g,j,h,i.fn)}},scrollToElement:function(h,i,g,l,k){h=h.nodeType?h:this.scroller.querySelector(h);if(!h){return}var j=b.offset(h);j.left-=this.wrapperOffset.left;j.top-=this.wrapperOffset.top;if(g===true){g=Math.round(h.offsetWidth/2-this.wrapper.offsetWidth/2)}if(l===true){l=Math.round(h.offsetHeight/2-this.wrapper.offsetHeight/2)}j.left-=g||0;j.top-=l||0;j.left=j.left>0?0:j.left<this.maxScrollX?this.maxScrollX:j.left;j.top=j.top>0?0:j.top<this.maxScrollY?this.maxScrollY:j.top;i=i===undefined||i===null||i==="auto"?Math.max(Math.abs(this.x-j.left),Math.abs(this.y-j.top)):i;this.scrollTo(j.left,j.top,i,k)},_transitionTime:function(h){h=h||0;this.scrollerStyle[b.style.transitionDuration]=h+"ms";if(!h&&b.isBadAndroid){this.scrollerStyle[b.style.transitionDuration]="0.001s"}if(this.indicators){for(var g=this.indicators.length;g--;){this.indicators[g].transitionTime(h)}}},_transitionTimingFunction:function(h){this.scrollerStyle[b.style.transitionTimingFunction]=h;if(this.indicators){for(var g=this.indicators.length;g--;){this.indicators[g].transitionTimingFunction(h)}}},_translate:function(g,j){if(this.options.useTransform){this.scrollerStyle[b.style.transform]="translate("+g+"px,"+j+"px)"+this.translateZ}else{g=Math.round(g);j=Math.round(j);this.scrollerStyle.left=g+"px";this.scrollerStyle.top=j+"px"}this.x=g;this.y=j;if(this.indicators){for(var h=this.indicators.length;h--;){this.indicators[h].updatePosition()}}},_initEvents:function(g){var h=g?b.removeEvent:b.addEvent,i=this.options.bindToWrapper?this.wrapper:d;h(d,"orientationchange",this);h(d,"resize",this);if(this.options.click){h(this.wrapper,"click",this,true)}if(!this.options.disableMouse){h(this.wrapper,"mousedown",this);h(i,"mousemove",this);h(i,"mousecancel",this);h(i,"mouseup",this)}if(b.hasPointer&&!this.options.disablePointer){h(this.wrapper,b.prefixPointerEvent("pointerdown"),this);h(i,b.prefixPointerEvent("pointermove"),this);h(i,b.prefixPointerEvent("pointercancel"),this);h(i,b.prefixPointerEvent("pointerup"),this)}if(b.hasTouch&&!this.options.disableTouch){h(this.wrapper,"touchstart",this);h(i,"touchmove",this);h(i,"touchcancel",this);h(i,"touchend",this)}h(this.scroller,"transitionend",this);h(this.scroller,"webkitTransitionEnd",this);h(this.scroller,"oTransitionEnd",this);h(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var h=d.getComputedStyle(this.scroller,null),g,i;if(this.options.useTransform){h=h[b.style.transform].split(")")[0].split(", ");g=+(h[12]||h[4]);i=+(h[13]||h[5])}else{g=+h.left.replace(/[^-\d.]/g,"");i=+h.top.replace(/[^-\d.]/g,"")}return{x:g,y:i}},_initIndicators:function(){var j=this.options.interactiveScrollbars,l=typeof this.options.scrollbars!=="string",n=[],h;var m=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){h={el:c("v",j,this.options.scrollbars),interactive:j,defaultScrollbars:true,customStyle:l,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(h.el);n.push(h)}if(this.options.scrollX){h={el:c("h",j,this.options.scrollbars),interactive:j,defaultScrollbars:true,customStyle:l,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};$(this.wrapper).find(".iScrollLoneScrollbar").remove();this.wrapper.appendChild(h.el);n.push(h)}}if(this.options.indicators){n=n.concat(this.options.indicators)}for(var k=n.length;k--;){this.indicators.push(new a(this,n[k]))}function g(p){for(var o=m.indicators.length;o--;){p.call(m.indicators[o])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){g(function(){this.fade()})});this.on("scrollCancel",function(){g(function(){this.fade()})});this.on("scrollStart",function(){g(function(){this.fade(1)})});this.on("beforeScrollStart",function(){g(function(){this.fade(1,true)})})}this.on("refresh",function(){g(function(){this.refresh()})});this.on("destroy",function(){g(function(){this.destroy()});delete this.indicators})},_initWheel:function(){b.addEvent(this.wrapper,"wheel",this);b.addEvent(this.wrapper,"mousewheel",this);b.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){b.removeEvent(this.wrapper,"wheel",this);b.removeEvent(this.wrapper,"mousewheel",this);b.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(k){if(!this.enabled){return}k.preventDefault();k.stopPropagation();var i,h,l,j,g=this;if(this.wheelTimeout===undefined){g._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){g._execEvent("scrollEnd");g.wheelTimeout=undefined},400);if("deltaX" in k){if(k.deltaMode===1){i=-k.deltaX*this.options.mouseWheelSpeed;h=-k.deltaY*this.options.mouseWheelSpeed}else{i=-k.deltaX;h=-k.deltaY}}else{if("wheelDeltaX" in k){i=k.wheelDeltaX/120*this.options.mouseWheelSpeed;h=k.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in k){i=h=k.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in k){i=h=-k.detail/3*this.options.mouseWheelSpeed}else{return}}}}i*=this.options.invertWheelDirection;h*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){i=h;h=0}if(this.options.snap){l=this.currentPage.pageX;j=this.currentPage.pageY;if(i>0){l--}else{if(i<0){l++}}if(h>0){j--}else{if(h<0){j++}}this.goToPage(l,j);return}l=this.x+Math.round(this.hasHorizontalScroll?i:0);j=this.y+Math.round(this.hasVerticalScroll?h:0);if(l>0){l=0}else{if(l<this.maxScrollX){l=this.maxScrollX}}if(j>0){j=0}else{if(j<this.maxScrollY){j=this.maxScrollY}}this.scrollTo(l,j,0);this._execEvent("scroll")},_initSnap:function(){this.currentPage={};if(typeof this.options.snap==="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var q=0,o,j=0,h,p,k,s=0,r,u=this.options.snapStepX||this.wrapperWidth,t=this.options.snapStepY||this.wrapperHeight,g;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){p=Math.round(u/2);k=Math.round(t/2);while(s>-this.scrollerWidth){this.pages[q]=[];o=0;r=0;while(r>-this.scrollerHeight){this.pages[q][o]={x:Math.max(s,this.maxScrollX),y:Math.max(r,this.maxScrollY),width:u,height:t,cx:s-p,cy:r-k};r-=t;o++}s-=u;q++}}else{g=this.options.snap;o=g.length;h=-1;for(;q<o;q++){if(q===0||g[q].offsetLeft<=g[q-1].offsetLeft){j=0;h++}if(!this.pages[j]){this.pages[j]=[]}s=Math.max(-g[q].offsetLeft,this.maxScrollX);r=Math.max(-g[q].offsetTop,this.maxScrollY);p=s-Math.round(g[q].offsetWidth/2);k=r-Math.round(g[q].offsetHeight/2);this.pages[j][h]={x:s,y:r,width:g[q].offsetWidth,height:g[q].offsetHeight,cx:p,cy:k};if(s>this.maxScrollX){j++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var g=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.x-this.startX),1000),Math.min(Math.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,g)})},_nearestSnap:function(h,n){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var k=0,j=this.pages.length,g=0;if(Math.abs(h-this.absStartX)<this.snapThresholdX&&Math.abs(n-this.absStartY)<this.snapThresholdY){return this.currentPage}if(h>0){h=0}else{if(h<this.maxScrollX){h=this.maxScrollX}}if(n>0){n=0}else{if(n<this.maxScrollY){n=this.maxScrollY}}for(;k<j;k++){if(h>=this.pages[k][0].cx){h=this.pages[k][0].x;break}}j=this.pages[k].length;for(;g<j;g++){if(n>=this.pages[0][g].cy){n=this.pages[0][g].y;break}}if(k===this.currentPage.pageX){k+=this.directionX;if(k<0){k=0}else{if(k>=this.pages.length){k=this.pages.length-1}}h=this.pages[k][0].x}if(g===this.currentPage.pageY){g+=this.directionY;if(g<0){g=0}else{if(g>=this.pages[0].length){g=this.pages[0].length-1}}n=this.pages[0][g].y}return{x:h,y:n,pageX:k,pageY:g}},goToPage:function(g,l,h,k){k=k||this.options.bounceEasing;if(g>=this.pages.length){g=this.pages.length-1}else{if(g<0){g=0}}if(l>=this.pages[g].length){l=this.pages[g].length-1}else{if(l<0){l=0}}var j=this.pages[g][l].x,i=this.pages[g][l].y;h=h===undefined?this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(j-this.x),1000),Math.min(Math.abs(i-this.y),1000)),300):h;this.currentPage={x:j,y:i,pageX:g,pageY:l};this.scrollTo(j,i,h,k)},next:function(h,j){var g=this.currentPage.pageX,i=this.currentPage.pageY;g++;if(g>=this.pages.length&&this.hasVerticalScroll){g=0;i++}this.goToPage(g,i,h,j)},prev:function(h,j){var g=this.currentPage.pageX,i=this.currentPage.pageY;g--;if(g<0&&this.hasVerticalScroll){g=0;i--}this.goToPage(g,i,h,j)},_initKeys:function(){var h={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var g;if(typeof this.options.keyBindings==="object"){for(g in this.options.keyBindings){if(typeof this.options.keyBindings[g]==="string"){this.options.keyBindings[g]=this.options.keyBindings[g].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(g in h){this.options.keyBindings[g]=this.options.keyBindings[g]||h[g]}b.addEvent(d,"keydown",this);this.on("destroy",function(){b.removeEvent(d,"keydown",this)})},_key:function(l){if(!this.enabled){return}var g=this.options.snap,m=g?this.currentPage.pageX:this.x,k=g?this.currentPage.pageY:this.y,i=b.getTime(),h=this.keyTime||0,j=0.25,n;if(this.options.useTransition&&this.isInTransition){n=this.getComputedPosition();this._translate(Math.round(n.x),Math.round(n.y));this.isInTransition=false}this.keyAcceleration=i-h<200?Math.min(this.keyAcceleration+j,50):0;switch(l.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){m+=g?1:this.wrapperWidth}else{k+=g?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){m-=g?1:this.wrapperWidth}else{k-=g?1:this.wrapperHeight}break;case this.options.keyBindings.end:m=g?this.pages.length-1:this.maxScrollX;k=g?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:m=0;k=0;break;case this.options.keyBindings.left:m+=g?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:k+=g?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:m-=g?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:k-=g?1:5+this.keyAcceleration>>0;break;default:return}if(g){this.goToPage(m,k);return}if(m>0){m=0;this.keyAcceleration=0}else{if(m<this.maxScrollX){m=this.maxScrollX;this.keyAcceleration=0}}if(k>0){k=0;this.keyAcceleration=0}else{if(k<this.maxScrollY){k=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(m,k,0);this.keyTime=i},_animate:function(p,o,j,g){var m=this,l=this.x,k=this.y,h=b.getTime(),n=h+j;function i(){var q=b.getTime(),s,r,t;if(q>=n){m.isAnimating=false;m._translate(p,o);if(!m.resetPosition(m.options.bounceTime)){m._execEvent("scrollEnd")}return}q=(q-h)/j;t=g(q);s=(p-l)*t+l;r=(o-k)*t+k;m._translate(s,r);if(m.isAnimating){f(i)}if(m.options.probeType===3){m._execEvent("scroll")}}this.isAnimating=true;i()},handleEvent:function(g){switch(g.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(g);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(g);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(g);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(g);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(g);break;case"keydown":this._key(g);break;case"click":if(!g._constructed){g.preventDefault();g.stopPropagation()}break}}};function c(j,h,i){var k=document.createElement("div"),g=document.createElement("div");if(i===true){k.style.cssText="position:absolute;z-index:9999";g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.4);border-radius:3px"}g.className="iScrollIndicator";if(j==="h"){if(i===true){k.style.cssText+=";height:5px;left:2px;right:2px;bottom:0";g.style.height="100%"}k.className="iScrollHorizontalScrollbar"}else{if(i===true){k.style.cssText+=";width:2px;bottom:2px;top:2px;right:2px";g.style.width="100%"}k.className="iScrollVerticalScrollbar"}k.style.cssText+=";overflow:hidden";if(!h){k.style.pointerEvents="none"}k.appendChild(g);return k}function a(g,h){this.wrapper=typeof h.el==="string"?document.querySelector(h.el):h.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=g;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var j in h){this.options[j]=h[j]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){b.addEvent(this.indicator,"touchstart",this);b.addEvent(d,"touchend",this)}if(!this.options.disablePointer){b.addEvent(this.indicator,b.prefixPointerEvent("pointerdown"),this);b.addEvent(d,b.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){b.addEvent(this.indicator,"mousedown",this);b.addEvent(d,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[b.style.transform]=this.scroller.translateZ;this.wrapperStyle[b.style.transitionDuration]=b.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}a.prototype={handleEvent:function(g){switch(g.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(g);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(g);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(g);break}},destroy:function(){if(this.options.interactive){b.removeEvent(this.indicator,"touchstart",this);b.removeEvent(this.indicator,b.prefixPointerEvent("pointerdown"),this);b.removeEvent(this.indicator,"mousedown",this);b.removeEvent(d,"touchmove",this);b.removeEvent(d,b.prefixPointerEvent("pointermove"),this);b.removeEvent(d,"mousemove",this);b.removeEvent(d,"touchend",this);b.removeEvent(d,b.prefixPointerEvent("pointerup"),this);b.removeEvent(d,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(h){var g=h.touches?h.touches[0]:h;h.preventDefault();h.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=g.pageX;this.lastPointY=g.pageY;this.startTime=b.getTime();if(!this.options.disableTouch){b.addEvent(d,"touchmove",this)}if(!this.options.disablePointer){b.addEvent(d,b.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){b.addEvent(d,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(l){var h=l.touches?l.touches[0]:l,i,g,m,k,j=b.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;i=h.pageX-this.lastPointX;this.lastPointX=h.pageX;g=h.pageY-this.lastPointY;this.lastPointY=h.pageY;m=this.x+i;k=this.y+g;this._pos(m,k);if(this.scroller.options.probeType===1&&j-this.startTime>300){this.startTime=j;this.scroller._execEvent("scroll")}else{if(this.scroller.options.probeType>1){this.scroller._execEvent("scroll")}}l.preventDefault();l.stopPropagation()},_end:function(i){if(!this.initiated){return}this.initiated=false;i.preventDefault();i.stopPropagation();b.removeEvent(d,"touchmove",this);b.removeEvent(d,b.prefixPointerEvent("pointermove"),this);b.removeEvent(d,"mousemove",this);if(this.scroller.options.snap){var g=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var h=this.options.snapSpeed||Math.max(Math.max(Math.min(Math.abs(this.scroller.x-g.x),1000),Math.min(Math.abs(this.scroller.y-g.y),1000)),300);if(this.scroller.x!==g.x||this.scroller.y!==g.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=g;this.scroller.scrollTo(g.x,g.y,h,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(g){g=g||0;this.indicatorStyle[b.style.transitionDuration]=g+"ms";if(!g&&b.isBadAndroid){this.indicatorStyle[b.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(g){this.indicatorStyle[b.style.transitionTimingFunction]=g},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){b.addClass(this.wrapper,"iScrollBothScrollbars");b.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{b.removeClass(this.wrapper,"iScrollBothScrollbars");b.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=Math.max(Math.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink==="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=Math.max(Math.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink==="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var g=this.options.listenX&&Math.round(this.sizeRatioX*this.scroller.x)||0,h=this.options.listenY&&Math.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(g<this.minBoundaryX){if(this.options.shrink==="scale"){this.width=Math.max(this.indicatorWidth+g,8);this.indicatorStyle.width=this.width+"px"}g=this.minBoundaryX}else{if(g>this.maxBoundaryX){if(this.options.shrink==="scale"){this.width=Math.max(this.indicatorWidth-(g-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";g=this.maxPosX+this.indicatorWidth-this.width}else{g=this.maxBoundaryX}}else{if(this.options.shrink==="scale"&&this.width!==this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(h<this.minBoundaryY){if(this.options.shrink==="scale"){this.height=Math.max(this.indicatorHeight+h*3,8);this.indicatorStyle.height=this.height+"px"}h=this.minBoundaryY}else{if(h>this.maxBoundaryY){if(this.options.shrink==="scale"){this.height=Math.max(this.indicatorHeight-(h-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";h=this.maxPosY+this.indicatorHeight-this.height}else{h=this.maxBoundaryY}}else{if(this.options.shrink==="scale"&&this.height!==this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=g;this.y=h;if(this.scroller.options.useTransform){this.indicatorStyle[b.style.transform]="translate("+g+"px,"+h+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=g+"px";this.indicatorStyle.top=h+"px"}},_pos:function(g,h){if(g<0){g=0}else{if(g>this.maxPosX){g=this.maxPosX}}if(h<0){h=0}else{if(h>this.maxPosY){h=this.maxPosY}}g=this.options.listenX?Math.round(g/this.sizeRatioX):this.scroller.x;h=this.options.listenY?Math.round(h/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(g,h)},fade:function(j,i){if(i&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var h=j?250:500,g=j?0:300;j=j?"1":"0";this.wrapperStyle[b.style.transitionDuration]=h+"ms";this.fadeTimeout=setTimeout((function(k){this.wrapperStyle.opacity=k;this.visible=+k}).bind(this,j),g)}};e.utils=b;d.IScroll=e}(window);+function($){var _zeptoMethodCache={scrollTop:$.fn.scrollTop,scrollLeft:$.fn.scrollLeft};(function(){$.extend($.fn,{scrollTop:function(top,dur){if(!this.length){return}var scroller=this.data("scroller");if(scroller&&scroller.scroller){return scroller.scrollTop(top,dur)}else{return _zeptoMethodCache.scrollTop.apply(this,arguments)}}});$.extend($.fn,{scrollLeft:function(left,dur){if(!this.length){return}var scroller=this.data("scroller");if(scroller&&scroller.scroller){return scroller.scrollLeft(left,dur)}else{return _zeptoMethodCache.scrollLeft.apply(this,arguments)}}})})();var Scroller=function(pageContent,_options){var $pageContent=this.$pageContent=$(pageContent);this.options=$.extend({},this._defaults,_options);var type=this.options.type;var useJSScroller=$.useJSScroller($pageContent);if(useJSScroller){var $pageContentInner=$pageContent.find(".content-inner");if(!$pageContentInner[0]){var children=$pageContent.children();if(children.length<1){$pageContent.children().wrapAll('<div class="content-inner"></div>')}else{$pageContent.html('<div class="content-inner">'+$pageContent.html()+"</div>")}}if($pageContent.hasClass("pull-to-refresh-content")){var minHeight=getScreenHeight()+($pageContent.prev().hasClass(".bar")?1:61);$pageContent.find(".content-inner").css("min-height",minHeight+"px")}var ptr=$(pageContent).hasClass("pull-to-refresh-content");var useTransform=true;var options={probeType:this.options.probeType?this.options.probeType:3,mouseWheel:true,click:$.device.androidChrome,useTransform:useTransform,scrollX:true};if(ptr){options.ptr=true;options.ptrOffset=44}this.scroller=new IScroll(pageContent,options);this._bindEventToDomWhenJs();$.initPullToRefresh=$._pullToRefreshJSScroll.initPullToRefresh;$.pullToRefreshDone=$._pullToRefreshJSScroll.pullToRefreshDone;$.pullToRefreshTrigger=$._pullToRefreshJSScroll.pullToRefreshTrigger;$.destroyToRefresh=$._pullToRefreshJSScroll.destroyToRefresh;$pageContent.addClass("javascript-scroll");if(!useTransform){$pageContent.find(".content-inner").css({width:"100%",position:"absolute"})}var nativeScrollTop=this.$pageContent[0].scrollTop;if(nativeScrollTop){this.$pageContent[0].scrollTop=0;this.scrollTop(nativeScrollTop)}}else{$pageContent.addClass("native-scroll");$.initPullToRefresh=$.initPullToRefreshNative;this._bindEventToDomWhenJs()}};Scroller.prototype={_defaults:{type:"native"},_bindEventToDomWhenJs:function(){if(this.scroller){var self=this;this.scroller.on("scrollStart",function(){self.$pageContent.trigger("scrollstart");$.custom.toggleTabTop=0});this.scroller.on("scroll",function(){self.$pageContent.trigger("scroll");$.topBarShadow()});this.scroller.on("scrollEnd",function(){self.$pageContent.trigger("scrollend");$.lazyLoad();$.topBarShadow();$.toggleFixedTop();try{var page=$.custom.pageObj;var func=eval("pse_"+page.attr("id"));if(typeof func==="function"){func.call(this,page)}}catch(ev){}})}},scrollTop:function(top,dur){if(this.scroller){if(top!==undefined){this.scroller.scrollTo(0,-1*top,dur)}else{return this.scroller.getComputedPosition().y*-1}}else{return this.$pageContent.scrollTop(top,dur)}return this},scrollLeft:function(left,dur){if(this.scroller){if(left!==undefined){this.scroller.scrollTo(-1*left,0)}else{return this.scroller.getComputedPosition().x*-1}}else{return this.$pageContent.scrollTop(left,dur)}return this},on:function(event,callback){if(this.scroller){this.scroller.on(event,function(){callback.call(this.wrapper)})}else{this.$pageContent.on(event,callback)}return this},off:function(event,callback){if(this.scroller){this.scroller.off(event,callback)}else{this.$pageContent.off(event,callback)}return this},refresh:function(){if(this.scroller){this.scroller.refresh()}return this},scrollHeight:function(){if(this.scroller){return this.scroller.scrollerHeight}else{return this.$pageContent[0].scrollHeight}}};function Plugin(option){var args=Array.apply(null,arguments);args.shift();var internal_return;this.each(function(){var $this=$(this);var options=$.extend({},$this.dataset(),typeof option==="object"&&option);var data=$this.data("scroller");if(!data){$this.data("scroller",(data=new Scroller(this,options)))}if(typeof option==="string"&&typeof data[option]==="function"){internal_return=data[option].apply(data,args);if(internal_return!==undefined){return false}}});if(internal_return!==undefined){return internal_return}else{return this}}var old=$.fn.scroller;$.fn.scroller=Plugin;$.fn.scroller.Constructor=Scroller;$.fn.scroller.noConflict=function(){$.fn.scroller=old;return this};$(function(){$('[data-toggle="scroller"]').scroller()});$.toggleCurInnerScroll=function(page){if(!page){page=$.custom.pageObj}page.find(".cur-inner-scroll").removeClass("cur-inner-scroll");page.find(".swiper-container .swiper-slide-active").find(".inner-scroll").addClass("cur-inner-scroll")};$.refreshInnerScroller=function(content){if(!content){return}if(content.length==0){return}var page=$.custom.pageObj;$.toggleCurInnerScroll(page);$.toggleFixedTop();var scrollHeight=content[0].scrollHeight;var offsetHeight=content.offset().height;if(scrollHeight>offsetHeight){page.off("touchmove")}else{page.on("touchmove",function(e){e.preventDefault()},false)}};$.refreshScroller=function(content){var page=$.custom.pageObj;if(!content){content=page.find(".content")}content.scroller("refresh");var check_inner=content.attr("data-check-inner");if(!check_inner){check_inner="true"}var innerScroll=content.find(".cur-inner-scroll");if(check_inner=="true"&&innerScroll.length>0){$.refreshInnerScroller($(innerScroll[0]))}else{var scrollHeight=content[0].scrollHeight;var offsetHeight=content.offset().height;$.toggleFixedTop();if(scrollHeight>offsetHeight){page.off("touchmove")}else{page.on("touchmove",function(e){e.preventDefault()},false)}}};$.lazyLoad=function(){var offsetTop=getScreenHeight();$("img.lazy-load").each(function(){var obj=$(this);var offset=obj.offset();var top=offset.top;var bottom=top+offset.height;if(bottom>=0&&top<=offsetTop){obj.attr("src",obj.attr("data-src")).removeClass("lazy-load").addClass("lazy-load-end").error(function(e){obj.addClass("lazy-load-error").attr("src",MY_SERVER.PUBLIC+"/images/public/blank.png")})}});$(".bg-lazy-load").each(function(){var obj=$(this);var offset=obj.offset();var top=offset.top;var bottom=top+offset.height;if(bottom>=0&&top<=offsetTop){obj.css("background-image","url("+obj.attr("data-src")+")").removeClass("bg-lazy-load").addClass("bg-lazy-load-end")}});$.refreshScroller()};$.resetErrorLazyLoad=function(){$("img.lazy-load-error").each(function(){$(this).removeClass("lazy-load-error").removeClass("lazy-load-end").addClass("lazy-load")});$("img.swiper-lazy-error").each(function(){$(this).removeClass("swiper-lazy-error").removeClass("swiper-lazy-loaded")})};$.useJSScroller=function(pageContent){var type=pageContent.attr("data-type");return(type==="js")||(type==="auto"&&($.device.android&&$.compareVersion("4.4.0",$.device.osVersion)>-1)||(type==="auto"&&($.device.ios&&$.compareVersion("6.0.0",$.device.osVersion)>-1)))};$.topBarShadow=function(){var page=$.custom.pageObj;var page_content=page.find(".content");var shadowHeight=parseInt(page.attr("data-top-shadow-height"));if(!shadowHeight){shadowHeight=200}var content_inner=page_content.find(".content-inner");if(content_inner.length<=0){return}var useJSScroller=$.useJSScroller(page_content);var outer_bar=page.find(".outer-bar");if(outer_bar.length<=0){return}var inner_bar=page.find(".inner-bar");var status_bar=page.find(".i-status-bar");if(null===outer_bar.attr("data-opacity")){outer_bar.attr("data-opacity",0)}if(null===inner_bar.attr("data-opacity")){inner_bar.attr("data-opacity",1)}var contentTop=-content_inner.offset().top;if(useJSScroller){var outer_bar_opacity=contentTop/shadowHeight;if(outer_bar_opacity<0){outer_bar_opacity=0}if(outer_bar_opacity>1){outer_bar_opacity=1}var inner_bar_opacity=1-(contentTop/shadowHeight);if(inner_bar_opacity<0){inner_bar_opacity=0}if(inner_bar_opacity>1){inner_bar_opacity=1}outer_bar.attr("data-opacity",outer_bar_opacity).css({opacity:outer_bar_opacity});status_bar.css({opacity:outer_bar_opacity});inner_bar.attr("data-opacity",inner_bar_opacity).css({opacity:inner_bar_opacity})}else{if(contentTop>shadowHeight){if(0==outer_bar.attr("data-opacity")){outer_bar.attr("data-opacity",1).css({opacity:1});status_bar.css({opacity:1})}if(1==inner_bar.attr("data-opacity")){inner_bar.attr("data-opacity",0).css({opacity:0})}}else{if(1==outer_bar.attr("data-opacity")){outer_bar.attr("data-opacity",0).css({opacity:0});status_bar.css({opacity:0})}if(0==inner_bar.attr("data-opacity")){inner_bar.attr("data-opacity",1).css({opacity:1})}}}};$.initFixedTabTop=function(page){if(!page){page=$.custom.pageObj}var page_data_id=page.attr("data-id");if(!$.custom.fixedTabTop[page_data_id]){var buttons_tab=page.find(".content .buttons-tab");if(buttons_tab.length>0){var tabOffset=buttons_tab.offset();$.custom.fixedTabTop[page_data_id]=tabOffset.top-tabOffset.height-parseInt(MY_VAR.CLIENT_BAR_HEIGHT)+2}}};$.getFixedTopContent=function(page){if(!page){page=$.custom.pageObj}var cur_inner=page.find(".cur-inner-scroll");if(cur_inner.length>0){return cur_inner}return page.find(".content")};$.toggleFixedTop=function(){var page=$.custom.pageObj;var fixed_top=page.find(".fixed-top");if(fixed_top.length>0){var beyond=parseInt(fixed_top.attr("data-beyond"));if(!beyond){beyond=2000}var bottom=parseInt(fixed_top.attr("data-bottom"));if(!bottom){bottom=4}var content=page.find(".cur-inner-scroll");if(content.length==0){content=page.find(".content")}var scroll_height=content[0].scrollHeight;var scroll_bottom=content.scrollTop()+content.offset().height;if(scroll_height>beyond&&scroll_bottom>beyond){if(fixed_top.css("display")=="none"){fixed_top.css("bottom",bottom+"rem").show().velocity({opacity:0.8},{easing:"ease-out",duration:300})}}else{if(fixed_top.css("display")!="none"){fixed_top.velocity({opacity:0},{easing:"ease-out",duration:300,complete:function(){$(this).hide()}})}}}};$.initSwiperBar=function(page){if(!page){page=$.custom.pageObj}var swiper_bar=page.find(".swiper-bar");var under=parseInt(swiper_bar.attr("data-under-bar"));if(!under){under=0}swiper_bar.attr("data-slides-per-view","auto");var slide_list=swiper_bar.find(".swiper-slide");if(slide_list.length<=under){slide_list.width(getScreenWidth()/slide_list.length)}else{slide_list.each(function(index,item){item=$(item);item.width(item.find("span").offset().width+$.custom.remRadix/1.2)})}};$.initSwiperHeight=function(page){if(!page){page=$.custom.pageObj}page.find(".swiper-slide").each(function(index,item){var obj=$(item);var height=obj.offset().height;var minHeight=getScreenHeight()-obj.parents(".swiper-container").offset().top;if(height<minHeight){height=minHeight}obj.attr("data-height",height).css("height",height)})};$.initEmptyContent=function(pageContent){if(!pageContent){pageContent=$.custom.pageObj.find(".content")}var tab_min_height=getScreenHeight()-pageContent.find(".bar.bar-nav").height()-pageContent.find(".buttons-tab.fixed-tab").height()-pageContent.find(".bar.bar-tab").height();pageContent.find(".tab").css("min-height",tab_min_height);pageContent.find(".tab .content-empty").css("height",tab_min_height)};$.initScroller=function(option){this.options=$.extend({},typeof option==="object"&&option);$('[data-toggle="scroller"],.content').scroller(option)};$.getScroller=function(content){content=content.hasClass("content")?content:content.parents(".content");if(content){return $(content).data("scroller")}else{return $(".content.javascript-scroll").data("scroller")}};$.detectScrollerType=function(content){if(content){if($(content).data("scroller")&&$(content).data("scroller").scroller){return"js"}else{return"native"}}}}(Zepto);+function(c){var b=function(g,h,d){var f=c(g);if(arguments.length===2){if(typeof h==="boolean"){d=h}}if(f.length===0){return false}if(f.hasClass("active")){if(d){f.trigger("show")}return false}var n=f.parent(".tabs");if(n.length===0){return false}var o=n.children(".tab.active");var l=c.custom.pageObj;var m=l.find(".content");var e=m.scrollTop();o.attr("data-scroll",e);o.removeClass("active");f.addClass("active");f.trigger("show");var p=parseInt(f.attr("data-scroll"));if(!p){p=0}var k=m.find(".buttons-tab").offset();if(k.top<=k.height+parseInt(MY_VAR.CLIENT_BAR_HEIGHT)){var q=l.attr("data-id");if(p<c.custom.fixedTabTop[q]){c.custom.toggleTabTop=c.custom.fixedTabTop[q]}else{c.custom.toggleTabTop=p}c.toggleTabTop()}c.lazyLoad();if(h){h=c(h)}else{if(typeof g==="string"){h=c('.tab-link[href="'+g+'"]')}else{h=c('.tab-link[href="#'+f.attr("id")+'"]')}if(!h||h&&h.length===0){c("[data-tab]").each(function(){if(f.is(c(this).attr("data-tab"))){h=c(this)}})}}if(h.length===0){return}var i;if(o&&o.length>0){var j=o.attr("id");if(j){i=c('.tab-link[href="#'+j+'"]')}if(!i||i&&i.length===0){c("[data-tab]").each(function(){if(o.is(c(this).attr("data-tab"))){i=c(this)}})}}if(h&&h.length>0){h.addClass("active")}if(i&&i.length>0){i.removeClass("active")}h.trigger("active");return true};var a=c.showTab;c.showTab=b;c.showTab.noConflict=function(){c.showTab=a;return this};c(document).on("click",".tab-link",function(f){f.preventDefault();var d=c(this);c("[data-tab-id="+d.attr("data-tab-id")+"]").each(function(){c(this).siblings().removeClass("active");c(this).addClass("active")});b(d.data("tab")||d.attr("href"),d)})}(Zepto);+function(b){b.initFixedTab=function(){var d=b(".fixed-tab");if(d.length===0){return}b(".fixed-tab").fixedTab()};var c=function(g,d){var e=this.$pageContent=b(g);var h=e.attr("data-fixed-top");if(!h){h=e[0].getBoundingClientRect().top;e.attr("data-fixed-top",h)}var f=b("[data-alternate="+d.replacepart+"]");if(!f.html()){f.html(e.html());if(b(".i-status-bar").length>0){f.css("top",MY_VAR.CLIENT_BAR_HEIGHT+"px")}f.css("margin-top",d.offset+"rem").css("z-index",9).hide()}this.options=b.extend({},this._defaults,{fixedTop:h,offset:0,replace:f},d);this._bindEvents()};c.prototype={_defaults:{offset:0},_bindEvents:function(){this.$pageContent.parents(".content").on("scroll",this._scrollHandler.bind(this));this.$pageContent.on("active",".tab-link",this._tabLinkHandler.bind(this))},_tabLinkHandler:function(d){var e=b(d.target).parents(".buttons-fixed").length>0;var g=this.options.fixedTop;var f=this.options.offset;b.lazyLoad();if(!e){return}this.$pageContent.parents(".content").scrollTop(g-f)},_scrollHandler:function(f){b.topBarShadow();var e=this.options.replace;var h=this.options.offset;if(e){var d=this.$pageContent.offset();var g=h+d.height;if(b(".i-status-bar").length>0){g+=parseInt(MY_VAR.CLIENT_BAR_HEIGHT)}if(d.top+2<g){e.css("visibility","visible").css("display","")}else{e.css("visibility","hidden")}}}};function a(e){var d=Array.apply(null,arguments);d.shift();this.each(function(){var h=b(this);var f=b.extend({},h.dataset(),typeof e==="object"&&e);var g=h.data("fixedtab");if(!g){h.data("fixedtab",(g=new c(this,f)))}})}b.fn.fixedTab=a;b.fn.fixedTab.Constructor=c;b(document).on("pageInit",function(){b.initFixedTab()})}(Zepto);+function(e){var d=0;var f=function(k){var j=e(k);if(!j.hasClass("pull-to-refresh-content")){j=j.find(".pull-to-refresh-content")}if(!j||j.length===0){return}var m=j.hasClass("content")?j:j.parents(".content")[0];var g=e.getScroller(m);if(!g){return}var h=j;function i(){if(h.hasClass("refreshing")){return}if(g.scrollTop()*-1>=44){h.removeClass("pull-down").addClass("pull-up")}else{h.removeClass("pull-up").addClass("pull-down")}}function l(){if(h.hasClass("refreshing")){return}h.removeClass("pull-down pull-up");h.addClass("refreshing transitioning");h.trigger("refresh");d=+new Date()}g.on("scroll",i);g.on("ptr",l);function n(){g.off("scroll",i);g.off("ptr",l)}j[0].destroyPullToRefresh=n};var b=function(h){h=e(h);if(h.length===0){h=e(".pull-to-refresh-content.refreshing")}if(h.length===0){return}var i=(+new Date())-d;var j=i>1000?0:1000-i;var g=e.getScroller(h);setTimeout(function(){g.refresh();h.removeClass("refreshing");h.transitionEnd(function(){h.removeClass("transitioning")})},j)};var a=function(h){h=e(h);if(h.length===0){h=e(".pull-to-refresh-content")}if(h.hasClass("refreshing")){return}h.addClass("refreshing");var g=e.getScroller(h);g.scrollTop(44+1,200);h.trigger("refresh")};var c=function(h){h=e(h);var g=h.hasClass("pull-to-refresh-content")?h:h.find(".pull-to-refresh-content");if(g.length===0){return}if(g[0].destroyPullToRefresh){g[0].destroyPullToRefresh()}};e._pullToRefreshJSScroll={initPullToRefresh:f,pullToRefreshDone:b,pullToRefreshTrigger:a,destroyPullToRefresh:c}}(Zepto);+function(a){a.initPullToRefreshNative=function(t){var p=a(t);if(!p.hasClass("pull-to-refresh-content")){p=p.find(".pull-to-refresh-content")}if(!p||p.length===0){return}var s,j,d={},v,r,f,n,e=false,m=false,u=0,l,c,g,b,q;n=p;if(n.attr("data-ptr-distance")){q=true}else{b=44}function i(w){if(s){if(a.device.android){if("targetTouches" in w&&w.targetTouches.length>1){return}}else{return}}j=false;s=true;v=undefined;g=undefined;d.x=w.type==="touchstart"?w.targetTouches[0].pageX:w.pageX;d.y=w.type==="touchstart"?w.targetTouches[0].pageY:w.pageY;f=(new Date()).getTime();n=a(this)}function k(y){if(!s){return}var x=y.type==="touchmove"?y.targetTouches[0].pageX:y.pageX;var w=y.type==="touchmove"?y.targetTouches[0].pageY:y.pageY;if(typeof v==="undefined"){v=!!(v||Math.abs(w-d.y)>Math.abs(x-d.x))}if(!v){s=false;return}c=n[0].scrollTop;if(typeof g==="undefined"&&c!==0){g=true}if(!j){n.removeClass("transitioning");if(c>n[0].offsetHeight){s=false;return}if(q){b=n.attr("data-ptr-distance");if(b.indexOf("%")>=0){b=n[0].offsetHeight*parseInt(b,10)/100}}u=n.hasClass("refreshing")?b:0;if(n[0].scrollHeight===n[0].offsetHeight||!a.device.ios){m=true}else{m=false}m=true}j=true;r=w-d.y;if(r>0&&c<=0||c<0){if(a.device.ios&&parseInt(a.device.osVersion.split(".")[0],10)>7&&c===0&&!g){m=true}if(m){y.preventDefault();l=(Math.pow(r,0.85)+u);n.transform("translate3d(0,"+l+"px,0)")}else{}if((m&&Math.pow(r,0.85)>b)||(!m&&r>=b*2)){e=true;n.addClass("pull-up").removeClass("pull-down")}else{e=false;n.removeClass("pull-up").addClass("pull-down")}}else{n.removeClass("pull-up pull-down");e=false;return}}function o(){if(!s||!j){s=false;j=false;return}if(l){n.addClass("transitioning");l=0}n.transform("");if(e){if(n.hasClass("refreshing")){return}n.addClass("refreshing");n.trigger("refresh")}else{n.removeClass("pull-down")}s=false;j=false}p.on(a.touchEvents.start,i);p.on(a.touchEvents.move,k);p.on(a.touchEvents.end,o);function h(){p.off(a.touchEvents.start,i);p.off(a.touchEvents.move,k);p.off(a.touchEvents.end,o)}p[0].destroyPullToRefresh=h};a.pullToRefreshDone=function(b){a(window).scrollTop(0);b=a(b);if(b.length===0){b=a(".pull-to-refresh-content.refreshing")}b.removeClass("refreshing").addClass("transitioning");b.transitionEnd(function(){b.removeClass("transitioning pull-up pull-down")})};a.pullToRefreshTrigger=function(b){b=a(b);if(b.length===0){b=a(".pull-to-refresh-content")}if(b.hasClass("refreshing")){return}b.addClass("transitioning refreshing");b.trigger("refresh")};a.destroyPullToRefresh=function(c){c=a(c);var b=c.hasClass("pull-to-refresh-content")?c:c.find(".pull-to-refresh-content");if(b.length===0){return}if(b[0].destroyPullToRefresh){b[0].destroyPullToRefresh()}}}(Zepto);+function(b){function a(){var d=b(this);var h=b.getScroller(d);var e=h.scrollTop();var k=h.scrollHeight();var j=d[0].offsetHeight;var c=d[0].getAttribute("data-distance");var i=d.find(".virtual-list");var g;var f=d.hasClass("infinite-scroll-top");if(!c){c=50}if(typeof c==="string"&&c.indexOf("%")>=0){c=parseInt(c,10)/100*j}if(c>j){c=j}if(f){if(e<c){d.trigger("infinite")}}else{if(e+j>=k-c){if(i.length>0){g=i[0].f7VirtualList;if(g&&!g.reachEnd){return}}d.trigger("infinite")}}}b.attachInfiniteScroll=function(c){b.getScroller(c).on("scroll",a)};b.detachInfiniteScroll=function(c){b.getScroller(c).off("scroll",a)};b.initInfiniteScroll=function(e){e=b(e);var d=e.hasClass("infinite-scroll")?e:e.find(".infinite-scroll");if(d.length===0){return}b.attachInfiniteScroll(d);e.forEach(function(g){if(b(g).hasClass("infinite-scroll-top")){var f=g.scrollHeight-g.clientHeight;b(g).scrollTop(f)}});function c(){b.detachInfiniteScroll(d);e.off("pageBeforeRemove",c)}e.on("pageBeforeRemove",c)}}(Zepto);+function(a){a(function(){a(document).on("focus",".searchbar input",function(b){var c=a(b.target);c.parents(".searchbar").addClass("searchbar-active")});a(document).on("click",".searchbar-cancel",function(c){var b=a(c.target);b.parents(".searchbar").removeClass("searchbar-active")});a(document).on("blur",".searchbar input",function(b){var c=a(b.target);c.parents(".searchbar").removeClass("searchbar-active")})})}(Zepto);+function($){$.allowPanelOpen=true;$.openPanel=function(panel){if(!$.allowPanelOpen){return false}if(panel==="left"||panel==="right"){panel=".panel-"+panel}panel=panel?$(panel):$(".panel").eq(0);var direction=panel.hasClass("panel-right")?"right":"left";if(panel.length===0||panel.hasClass("active")){return false}$.closePanel();$.allowPanelOpen=false;var effect=panel.hasClass("panel-reveal")?"reveal":"cover";panel.css({display:"block"}).addClass("active");panel.trigger("open");var clientLeft=panel[0].clientLeft;var transitionEndTarget=effect==="reveal"?$($.getCurrentPage()):panel;var openedTriggered=false;function panelTransitionEnd(){transitionEndTarget.transitionEnd(function(e){if(e.target===transitionEndTarget[0]){if(panel.hasClass("active")){panel.trigger("opened")}else{panel.trigger("closed")}$.allowPanelOpen=true}else{panelTransitionEnd()}})}panelTransitionEnd();$(document.body).addClass("with-panel-"+direction+"-"+effect);return true};$.closePanel=function(){var activePanel=$(".panel.active");if(activePanel.length===0){return false}var effect=activePanel.hasClass("panel-reveal")?"reveal":"cover";var panelPosition=activePanel.hasClass("panel-left")?"left":"right";activePanel.removeClass("active");var transitionEndTarget=effect==="reveal"?$(".page"):activePanel;activePanel.trigger("close");$.allowPanelOpen=false;transitionEndTarget.transitionEnd(function(){if(activePanel.hasClass("active")){return}activePanel.css({display:""});activePanel.trigger("closed");$("body").removeClass("panel-closing");$.allowPanelOpen=true});$("body").addClass("panel-closing").removeClass("with-panel-"+panelPosition+"-"+effect)};$(document).on("click",".open-panel",function(e){var panel=$(e.target).data("panel");$.openPanel(panel)});$(document).on("click",".close-panel, .panel-overlay",function(e){$.closePanel()});$.initSwipePanels=function(){var panel,side;var swipePanel=$.smConfig.swipePanel;var swipePanelOnlyClose=$.smConfig.swipePanelOnlyClose;var swipePanelCloseOpposite=true;var swipePanelActiveArea=false;var swipePanelThreshold=2;var swipePanelNoFollow=false;if(!(swipePanel||swipePanelOnlyClose)){return}var panelOverlay=$(".panel-overlay");var isTouched,isMoved,isScrolling,touchesStart={},touchStartTime,touchesDiff,translate,opened,panelWidth,effect,direction;var views=$(".page");function handleTouchStart(e){$.custom.toggleTabTop=0;startTimer("nativeScrollEnd",function(){$.lazyLoad()},500,10);if(!$.allowPanelOpen||(!swipePanel&&!swipePanelOnlyClose)||isTouched){return}if($(".modal-in, .photo-browser-in").length>0){return}if(!(swipePanelCloseOpposite||swipePanelOnlyClose)){if($(".panel.active").length>0&&!panel.hasClass("active")){return}}touchesStart.x=e.type==="touchstart"?e.targetTouches[0].pageX:e.pageX;touchesStart.y=e.type==="touchstart"?e.targetTouches[0].pageY:e.pageY;if(swipePanelCloseOpposite||swipePanelOnlyClose){if($(".panel.active").length>0){side=$(".panel.active").hasClass("panel-left")?"left":"right"}else{if(swipePanelOnlyClose){return}side=swipePanel}if(!side){return}}panel=$(".panel.panel-"+side);if(!panel[0]){return}opened=panel.hasClass("active");if(swipePanelActiveArea&&!opened){if(side==="left"){if(touchesStart.x>swipePanelActiveArea){return}}if(side==="right"){if(touchesStart.x<window.innerWidth-swipePanelActiveArea){return}}}isMoved=false;isTouched=true;isScrolling=undefined;touchStartTime=(new Date()).getTime();direction=undefined}function handleTouchMove(e){if(!isTouched){return}if(!panel[0]){return}if(e.f7PreventPanelSwipe){return}var pageX=e.type==="touchmove"?e.targetTouches[0].pageX:e.pageX;var pageY=e.type==="touchmove"?e.targetTouches[0].pageY:e.pageY;if(typeof isScrolling==="undefined"){isScrolling=!!(isScrolling||Math.abs(pageY-touchesStart.y)>Math.abs(pageX-touchesStart.x))}if(isScrolling){isTouched=false;return}if(!direction){if(pageX>touchesStart.x){direction="to-right"}else{direction="to-left"}if(side==="left"&&(direction==="to-left"&&!panel.hasClass("active"))||side==="right"&&(direction==="to-right"&&!panel.hasClass("active"))){isTouched=false;return}}if(swipePanelNoFollow){var timeDiff=(new Date()).getTime()-touchStartTime;if(timeDiff<300){if(direction==="to-left"){if(side==="right"){$.openPanel(side)}if(side==="left"&&panel.hasClass("active")){$.closePanel()}}if(direction==="to-right"){if(side==="left"){$.openPanel(side)}if(side==="right"&&panel.hasClass("active")){$.closePanel()}}}isTouched=false;isMoved=false;return}if(!isMoved){effect=panel.hasClass("panel-cover")?"cover":"reveal";if(!opened){panel.show();panelOverlay.show()}panelWidth=panel[0].offsetWidth;panel.transition(0)}isMoved=true;e.preventDefault();var threshold=opened?0:-swipePanelThreshold;if(side==="right"){threshold=-threshold}touchesDiff=pageX-touchesStart.x+threshold;if(side==="right"){translate=touchesDiff-(opened?panelWidth:0);if(translate>0){translate=0}if(translate<-panelWidth){translate=-panelWidth}}else{translate=touchesDiff+(opened?panelWidth:0);if(translate<0){translate=0}if(translate>panelWidth){translate=panelWidth}}if(effect==="reveal"){views.transform("translate3d("+translate+"px,0,0)").transition(0);panelOverlay.transform("translate3d("+translate+"px,0,0)")}else{panel.transform("translate3d("+translate+"px,0,0)").transition(0)}}function handleTouchEnd(e){$.toggleFixedTop();startTimer("nativeScrollEnd",function(){nativeScrollEnd()},1000,5);function nativeScrollEnd(){var page=$.custom.pageObj;var cur_scroll_top=page.find(".content").scrollTop();if($.custom.scrollTop!=cur_scroll_top){$.custom.scrollTop=cur_scroll_top}else{$.custom.scrollTop=-1;$.topBarShadow()}$.lazyLoad();try{var func=eval("pse_"+page.attr("id"));if(typeof func==="function"){func.call(this,page)}}catch(ev){}}if(!isTouched||!isMoved){isTouched=false;isMoved=false;return}isTouched=false;isMoved=false;var timeDiff=(new Date()).getTime()-touchStartTime;var action;var edge=(translate===0||Math.abs(translate)===panelWidth);if(!opened){if(translate===0){action="reset"}else{if(timeDiff<300&&Math.abs(translate)>0||timeDiff>=300&&(Math.abs(translate)>=panelWidth/2)){action="swap"}else{action="reset"}}}else{if(translate===-panelWidth){action="reset"}else{if(timeDiff<300&&Math.abs(translate)>=0||timeDiff>=300&&(Math.abs(translate)<=panelWidth/2)){if(side==="left"&&translate===panelWidth){action="reset"}else{action="swap"}}else{action="reset"}}}if(action==="swap"){$.allowPanelOpen=true;if(opened){$.closePanel();if(edge){panel.css({display:""});$("body").removeClass("panel-closing")}}else{$.openPanel(side)}if(edge){$.allowPanelOpen=true}}if(action==="reset"){if(opened){$.allowPanelOpen=true;$.openPanel(side)}else{$.closePanel();if(edge){$.allowPanelOpen=true;panel.css({display:""})}else{var target=effect==="reveal"?views:panel;$("body").addClass("panel-closing");target.transitionEnd(function(){$.allowPanelOpen=true;panel.css({display:""});$("body").removeClass("panel-closing")})}}}if(effect==="reveal"){views.transition("");views.transform("")}panel.transition("").transform("");panelOverlay.css({display:""}).transform("")}$(document).on($.touchEvents.start,handleTouchStart);$(document).on($.touchEvents.move,handleTouchMove);$(document).on($.touchEvents.end,handleTouchEnd)};$.initSwipePanels()}(Zepto);+function(f){if(!window.CustomEvent){window.CustomEvent=function(j,i){i=i||{bubbles:false,cancelable:false,detail:undefined};var k=document.createEvent("CustomEvent");k.initCustomEvent(j,i.bubbles,i.cancelable,i.detail);return k};window.CustomEvent.prototype=window.Event.prototype}var b={pageLoadStart:"pageLoadStart",pageLoadCancel:"pageLoadCancel",pageLoadError:"pageLoadError",pageLoadComplete:"pageLoadComplete",pageAnimationStart:"pageAnimationStart",pageAnimationEnd:"pageAnimationEnd",beforePageRemove:"beforePageRemove",pageRemoved:"pageRemoved",beforePageSwitch:"beforePageSwitch",pageInit:"pageInitInternal"};var g={getUrlFragment:function(i){var j=i.indexOf("#");return j===-1?"":i.slice(j+1)},getAbsoluteUrl:function(i){var j=document.createElement("a");j.setAttribute("href",i);var k=j.href;j=null;return k},getBaseUrl:function(i){var j=i.indexOf("#");return j===-1?i.slice(0):i.slice(0,j)},toUrlObject:function(k){var i=this.getAbsoluteUrl(k),l=this.getBaseUrl(i),j=this.getUrlFragment(k);return{base:l,full:i,original:k,fragment:j}},supportStorage:function(){var i="sm.router.storage.ability";try{sessionStorage.setItem(i,i);sessionStorage.removeItem(i);return true}catch(j){return false}}};var e={sectionGroupClass:"page-group",curPageClass:"page-current",visiblePageClass:"page-visible",pageClass:"page"};var c=window.history;var a=function(){this.sessionNames={currentState:"sm.router.currentState",maxStateId:"sm.router.maxStateId"};this._init();this.xhr=null;if(!f("body").hasClass("disable-router")){window.addEventListener("popstate",this._onPopState.bind(this))}};a.prototype._init=function(){this.$view=f("body");this.cache={};var l=f(document);var o=location.href;var q;var n=g.toUrlObject(o);var k=l.find("."+e.pageClass);var i=l.find("."+e.curPageClass);var p=i.eq(0);var j;if(n.fragment){j=l.find("#"+n.fragment)}if(j&&j.length){i=j.eq(0)}else{if(!i.length){i=k.eq(0)}}if(!i.attr("id")){i.attr("id",this._generateRandomId())}if(p.length&&(p.attr("id")!==i.attr("id"))){p.removeClass(e.curPageClass);i.addClass(e.curPageClass)}else{i.addClass(e.curPageClass)}q=i.attr("id");if(c.state===null){var m={id:this._getNextStateId(),url:g.toUrlObject(o),pageId:q};c.replaceState(m,"",o);this._saveAsCurrentState(m);this._incMaxStateId()}};a.prototype.load=function(i,k,l,j){openSuperShade();setTimeout(function(){if(hasSuperShade()){closeSuperShade();f.refreshScroller()}},500);if(k===undefined){k=false}if(typeof j=="undefined"){j=DIRECTION.rightToLeft}f.custom.curDirection=j;if(this._isTheSameDocument(location.href,i)){this._switchToSection(g.getUrlFragment(i))}else{this._switchToDocument(i,k,l,j)}};a.prototype.forward=function(){c.forward()};a.prototype.back=function(j){f.custom.backFlag=true;c.go(j||-1)};a.prototype.loadPage=function(i,j){this.load(i,undefined,undefined,j)};a.prototype._switchToSection=function(k){if(!k){return}var i=this._getCurrentSection(),j=f("#"+k);if(i===j){return}this._animateSection(i,j,DIRECTION.rightToLeft);this._pushNewState("#"+k,k)};a.prototype._switchToDocument=function(i,n,o,m){var l=g.toUrlObject(i).base;if(n){delete this.cache[l]}var k=this.cache[l];if(k&&f.inArray(k.pageId,f.custom.correctPages)>-1){f.custom.correctPages.remove(k.pageId);delete this.cache[l];k=undefined}var j=this;if(k){this._doSwitchDocument(i,k.$content,o,m)}else{this._loadDocument(i,{success:function(q){try{j._doSwitchDocument(i,q.find("."+e.sectionGroupClass),o,m)}catch(p){}},error:function(){}})}};a.prototype._doSwitchDocument=function(j,q,p,r){if(typeof p==="undefined"){p=true}var l=g.toUrlObject(j);var m=this.$view.find("."+e.sectionGroupClass);var n=f(f("<div></div>").append(q).html());var o=n.find("."+e.pageClass);var i=n.find("."+e.curPageClass);var k;if(l.fragment){k=n.find("#"+l.fragment)}if(k&&k.length){i=k.eq(0)}else{if(!i.length){i=o.eq(0)}}if(!i.attr("id")){i.attr("id",this._generateRandomId())}if(f.custom.backFlag){if(f.custom.curDirection==DIRECTION.direct){r=DIRECTION.direct}else{if(f.custom.curDirection==DIRECTION.rightToLeft){r=DIRECTION.leftToRight}else{r=DIRECTION.rightToLeft}}}var s=this._getCurrentSection();s.trigger(b.beforePageSwitch,[s.attr("id"),s]);o.removeClass(e.curPageClass);i.addClass(e.curPageClass);this.$view.prepend(n);this._animateDocument(m,n,i,r);if(p){this._pushNewState(j,i.attr("id"))}};a.prototype._isTheSameDocument=function(i,j){return g.toUrlObject(i).base===g.toUrlObject(j).base};a.prototype._loadDocument=function(j,k){if(this.xhr&&this.xhr.readyState<4){this.xhr.onreadystatechange=function(){};this.xhr.abort();this.dispatch(b.pageLoadCancel)}this.dispatch(b.pageLoadStart);k=k||{};var i=this;this.xhr=f.ajax({url:j,success:f.proxy(function(m,l,n){var o=f("<html></html>");o.append(m);k.success&&k.success.call(null,o,l,n)},this),error:function(n,l,m){k.error&&k.error.call(null,n,l,m);i.dispatch(b.pageLoadError)},complete:function(m,l){k.complete&&k.complete.call(null,m,l);i.dispatch(b.pageLoadComplete)}})};a.prototype._saveDocumentIntoCache=function(j,i){this.cache[g.toUrlObject(i).base]={pageId:f.custom.pageId,$content:f(j).find("."+e.sectionGroupClass)}};a.prototype._getLastState=function(){var i=sessionStorage.getItem(this.sessionNames.currentState);try{i=JSON.parse(i)}catch(j){i=null}return i};a.prototype._saveAsCurrentState=function(i){sessionStorage.setItem(this.sessionNames.currentState,JSON.stringify(i))};a.prototype._getNextStateId=function(){var i=sessionStorage.getItem(this.sessionNames.maxStateId);return i?parseInt(i,10)+1:1};a.prototype._incMaxStateId=function(){sessionStorage.setItem(this.sessionNames.maxStateId,this._getNextStateId())};a.prototype._animateDocument=function(m,p,o,n){var l=o.attr("id");var k=m.find("."+e.curPageClass);k.addClass(e.visiblePageClass).removeClass(e.curPageClass);o.trigger(b.pageAnimationStart,[l,o]);function j(){k.removeClass(e.visiblePageClass);f(window).trigger(b.beforePageRemove,[m]);m.remove();f(window).trigger(b.pageRemoved)}function i(){o.trigger(b.pageAnimationEnd,[l,o]);o.trigger(b.pageInit,[l,o])}if(n==DIRECTION.direct){j();setTimeout(i,100)}else{this._animateElement(m,p,n);m.animationEnd(j);p.animationEnd(i)}};a.prototype._animateSection=function(j,l,k){var i=l.attr("id");j.trigger(b.beforePageSwitch,[j.attr("id"),j]);j.removeClass(e.curPageClass);l.addClass(e.curPageClass);l.trigger(b.pageAnimationStart,[i,l]);this._animateElement(j,l,k);l.animationEnd(function(){l.trigger(b.pageAnimationEnd,[i,l]);l.trigger(b.pageInit,[i,l])})};a.prototype._animateElement=function(k,n,m){if(typeof m==="undefined"){m=DIRECTION.rightToLeft}var j=["page-from-center-to-left","page-from-center-to-right","page-from-right-to-center","page-from-left-to-center"].join(" ");var l,i;switch(m){case DIRECTION.rightToLeft:l="page-from-center-to-left";i="page-from-right-to-center";break;case DIRECTION.leftToRight:l="page-from-center-to-right";i="page-from-left-to-center";break;default:l="page-from-center-to-left";i="page-from-right-to-center";break}k.removeClass(j).addClass(l);n.removeClass(j).addClass(i);k.animationEnd(function(){k.removeClass(j)});n.animationEnd(function(){n.removeClass(j)})};a.prototype._getCurrentSection=function(){return this.$view.find("."+e.curPageClass).eq(0)};a.prototype._deleteCache=function(i){if("-"==i){var j=this;f.each(j.cache,function(k,l){if(k!=getMqstCookie("sq_index_url")){delete j.cache[k]}})}else{delete this.cache[i]}};a.prototype._back=function(j,k){var m=this;if(m._isTheSameDocument(j.url.full,k.url.full)){var i=f("#"+j.pageId);if(i.length){var l=m._getCurrentSection();m._animateSection(l,i,DIRECTION.leftToRight);m._saveAsCurrentState(j)}else{location.href=j.url.full}}else{m._switchToDocument(j.url.full,false,false,DIRECTION.leftToRight);setTimeout(function(){m._saveAsCurrentState(j);m._deleteCache(g.toUrlObject(k.url.full).base)},100)}};a.prototype._forward=function(j,k){if(this._isTheSameDocument(j.url.full,k.url.full)){var i=f("#"+j.pageId);if(i.length){var l=this._getCurrentSection();this._animateSection(l,i,DIRECTION.rightToLeft);this._saveAsCurrentState(j)}else{location.href=j.url.full}}else{this._switchToDocument(j.url.full,false,false,DIRECTION.rightToLeft);this._saveAsCurrentState(j)}};a.prototype._onPopState=function(j){var k=j.state;if(!k||!k.pageId){return}var i=this._getLastState();if(!i){console.error&&console.error("Missing last state when backward or forward");return}if(k.id===i.id){return}if(k.id<i.id){this._back(k,i)}else{this._forward(k,i)}};a.prototype._pushNewState=function(i,j){var k={id:this._getNextStateId(),pageId:j,url:g.toUrlObject(i)};c.pushState(k,"",i);this._saveAsCurrentState(k);this._incMaxStateId()};a.prototype._generateRandomId=function(){return"page-"+(+new Date())};a.prototype.dispatch=function(i){var j=new CustomEvent(i,{bubbles:true,cancelable:true});window.dispatchEvent(j)};function d(j){var l=["external","tab-link","open-popup","close-popup","open-panel","close-panel"];for(var k=l.length-1;k>=0;k--){if(j.hasClass(l[k])){return true}}var m=j.get(0);var n=m.getAttribute("href");var o=["http","https"];if(/^(\w+):/.test(n)&&o.indexOf(RegExp.$1)<0){return true}if(m.hasAttribute("external")){return true}return false}function h(i){var k=f.smConfig.routerFilter;if(f.isFunction(k)){var j=k(i);if(typeof j==="boolean"){return j}}return true}f(function(){if(!f.smConfig.router){return}if(!g.supportStorage()){return}var k=f("."+e.pageClass);if(!k.length){var j="Disable router function because of no .page elements";if(window.console&&window.console.warn){console.warn(j)}return}var i=f.router=new a();f(document).on("click","a",function(p){var l=f(p.currentTarget);if(l.attr("data-check-login")==1){if(!isLogin()){return false}}var n=h(l);if(!n){return}if(d(l)){return}p.preventDefault();if(l.hasClass("back")){i.back()}else{var m=l.attr("href");if(!m||m==="#"){return}var o=l.attr("data-no-cache")==="true";if(l.attr("data-effect")==="right"){i.load(m,o,undefined,DIRECTION.leftToRight)}else{if(l.attr("data-effect")==="direct"){i.load(m,o,undefined,DIRECTION.direct)}else{i.load(m,o,undefined,DIRECTION.rightToLeft)}}}})})}(Zepto);+function(a){a.lastPosition=function(c,g,b){if(!sessionStorage){return}var f=c.needMemoryClass||[];a(window).off("beforePageSwitch").on("beforePageSwitch",function(i,j,h){e(h.attr("data-id"),h)});a(window).off("pageAnimationStart").on("pageAnimationStart",function(i,j,h){d(h.attr("data-id"),h)});function d(i,h){if(a.inArray(i,a.custom.correctPages)>-1){return}f.forEach(function(k,j){if(a(k).length===0){return}var m=i;var l=sessionStorage.getItem(m);if(l){h.find(k).scrollTop(parseInt(l))}})}function e(j,h){var i=j;f.forEach(function(l,k){if(a(l).length===0){return}if(a.custom.backFlag){sessionStorage.removeItem(i);a.custom.backFlag=false}else{sessionStorage.setItem(i,h.find(l).scrollTop())}})}}}(Zepto);+function(b){var a=function(){var c=b(".page-current");if(!c[0]){c=b(".page").addClass("page-current")}return c};b.initPage=function(e){var d=a();if(!d[0]){d=b(document.body)}var c=d.hasClass("content")?d:d.find(".content");c.scroller();b.initPullToRefresh(c);b.initInfiniteScroll(c);b.initCalendar(c);if(b.initSwiper){b.initSwiper(d)}};if(b.smConfig.showPageLoadingIndicator){b(window).on("pageLoadStart",function(){});b(window).on("pageAnimationStart",function(){});b(window).on("pageLoadCancel",function(){});b(window).on("pageLoadComplete",function(){});b(window).on("pageLoadError",function(){})}b(window).on("pageAnimationStart",function(c,e,d){b.closeModal();b.closePanel();b("body").removeClass("panel-closing");b.allowPanelOpen=true});b(window).on("pageInit",function(d,e,c){b.hideIndicator();b.lastPosition({needMemoryClass:[".content"]},e,c)});window.addEventListener("pageshow",function(c){if(c.persisted){location.reload()}});b.init=function(){var c=a();var d=c[0].id;b.initPage();c.trigger("pageInit",[d,c])};b(function(){FastClick.attach(document.body);if(b.smConfig.autoInit){b.init()}b(document).on("pageInitInternal",function(d,f,c){b.init()})})}(Zepto);+function(c){if(c.device.ios){var a=function(f){var e;var d;f=f||document.querySelector(f);if(!f){return}f.addEventListener("touchstart",function(g){e=g.touches[0].pageY;d=f.scrollTop;if(d<=0){f.scrollTop=1}if(d+f.offsetHeight>=f.scrollHeight){f.scrollTop=f.scrollHeight-f.offsetHeight-1}},false)};var b=function(){var e=c(".page-current").length>0?".page-current ":"";var d=c(e+".content");new a(d[0])};c(document).on(c.touchEvents.move,".page-current .bar",function(){event.preventDefault()});c(document).on("pageLoadComplete",function(){b()});c(document).on("pageAnimationEnd",function(){b()});b()}}(Zepto);